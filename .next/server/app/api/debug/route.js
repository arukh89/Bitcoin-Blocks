(()=>{var e={};e.id=211,e.ids=[211],e.modules={221:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>b,routeModule:()=>u,serverHooks:()=>m,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>h});var n={};s.r(n),s.d(n,{GET:()=>p,runtime:()=>l});var r=s(9682),i=s(1739),o=s(6442),a=s(9667),c=s(7677);async function p(e){let t={timestamp:new Date().toISOString(),runtime:"nodejs",nodeEnv:"production",environment:{NEXT_PUBLIC_SITE_URL:"https://bitcoin-blocks.vercel.app",NEXT_PUBLIC_SUPABASE_URL:"configured",SUPABASE_URL:process.env.SUPABASE_URL?"configured":"missing"},headers:Object.fromEntries(e.headers.entries()),supabaseTest:null,errors:[]};try{let{data:e,error:s}=await c.ND.from("rounds").select("id").limit(1).single();t.supabaseTest={success:!s,error:s?.message||null,data:e?"connected":"no data"}}catch(e){t.supabaseTest={success:!1,error:e.message,data:null},t.errors.push(`Supabase connection failed: ${e.message}`)}try{t.nodeVersion=process.versions?.node||"not available"}catch(e){t.errors.push(`Node.js API access failed: ${e.message}`),t.nodeVersion="edge runtime restriction"}return a.NextResponse.json(t)}let l="nodejs",u=new r.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/debug/route",pathname:"/api/debug",filename:"route",bundlePath:"app/api/debug/route"},resolvedPagePath:"c:\\Users\\UserBQ\\Downloads\\mini app\\blocks\\src\\app\\api\\debug\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:d,workUnitAsyncStorage:h,serverHooks:m}=u;function b(){return(0,o.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:h})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3939:e=>{"use strict";e.exports=require("@supabase/supabase-js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7002:()=>{},7677:(e,t,s)=>{"use strict";s.d(t,{E2:()=>i,ND:()=>r});var n=s(3939);console.log("\uD83D\uDD0D DEBUG - Supabase Client Initialization:",{runtime:"server",nodeEnv:"production",nextRuntime:"nodejs",supabaseUrl:"configured",hasAnonKey:!0,timestamp:new Date().toISOString()});let r=(0,n.createClient)("https://masgfwpxfytraiwkvbmg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hc2dmd3B4Znl0cmFpd2t2Ym1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2OTQ5NTYsImV4cCI6MjA3NjI3MDk1Nn0.QAVE2pVMR869KycgzXe2MaQyJTyQb-yZM5zfIbtsMDM",{db:{schema:"public"},realtime:{params:{eventsPerSecond:10,reconnectDelay:2e3,maxReconnectAttempts:10,heartbeatIntervalMs:3e4,wsCloseTimeout:5e3}},auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,debug:!1,flowType:"pkce"},global:{headers:{"x-application-name":"bitcoin-blocks-miniapp","x-application-version":"1.0.0","x-client-type":"web","x-content-type-options":"nosniff","x-frame-options":"DENY","x-xss-protection":"1; mode=block"}}}),i=(0,n.createClient)("https://masgfwpxfytraiwkvbmg.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1,debug:!1},db:{schema:"public"},global:{headers:{"x-application-name":"bitcoin-blocks-miniapp-admin","x-application-version":"1.0.0","x-client-type":"admin","x-privilege-level":"service-role"}}});async function o(){try{let{data:e,error:t}=await r.from("rounds").select("id").limit(1).single();if(t&&"PGRST116"!==t.code)return console.warn("⚠️ Supabase connection check failed:",t),!1;return!0}catch(e){return console.error("❌ Supabase connection check error:",e),!1}}class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}startMonitoring(){this.checkInterval||(this.checkConnection(),this.checkInterval=setInterval(()=>{this.checkConnection()},this.CHECK_INTERVAL))}stopMonitoring(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}async checkConnection(){let e=await o();e!==this.isConnected&&(this.isConnected=e,this.notifyListeners(e),e?console.log("✅ Supabase connection restored"):console.warn("⚠️ Supabase connection lost"))}notifyListeners(e){this.listeners.forEach(t=>{try{t(e)}catch(e){console.error("❌ Error in connection listener:",e)}})}addListener(e){this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}getConnectionStatus(){return this.isConnected}constructor(){this.isConnected=!1,this.checkInterval=null,this.CHECK_INTERVAL=3e4,this.listeners=[]}}a.getInstance()},8850:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[859,176],()=>s(221));module.exports=n})();