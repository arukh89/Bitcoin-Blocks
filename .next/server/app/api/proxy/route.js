(()=>{var e={};e.id=246,e.ids=[246],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1646:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>y,routeModule:()=>g,serverHooks:()=>w,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>f});var o={};r.r(o),r.d(o,{GET:()=>l,OPTIONS:()=>x,POST:()=>p});var s=r(9682),n=r(1739),a=r(6442),i=r(9667);let c=["mempool.space","api.farcaster.xyz","api.warpcast.com","mainnet.base.org","vercel.storage"],u=new Map;async function l(e){return d(e,"GET")}async function p(e){return d(e,"POST")}async function d(e,t){try{let r,o,{searchParams:s}=new URL(e.url),n=s.get("url"),a=s.get("method")||t;if(!n)return i.NextResponse.json({error:"Missing url parameter"},{status:400});try{r=decodeURIComponent(n)}catch{return i.NextResponse.json({error:"Invalid URL encoding"},{status:400})}if(!function(e){try{let t=new URL(e);return c.includes(t.hostname)}catch{return!1}}(r))return i.NextResponse.json({error:"URL not allowed"},{status:403});let l=e.headers.get("x-forwarded-for")||e.headers.get("x-real-ip")||"unknown";if(!function(e){let t=Date.now(),r=u.get(e);return!r||t>r.resetTime?(u.set(e,{count:1,resetTime:t+6e4}),!0):!(r.count>=100)&&(r.count++,!0)}(l))return i.NextResponse.json({error:"Rate limit exceeded"},{status:429});let p={method:a,headers:{"User-Agent":"Bitcoin-Blocks-Mini-App/1.0",Accept:"application/json","Accept-Encoding":"gzip, deflate"}};if("POST"===a){let t=await e.text();if(t.length>5242880)return i.NextResponse.json({error:"Request body too large"},{status:413});p.body=t,p.headers["Content-Type"]="application/json"}let d=new AbortController,x=setTimeout(()=>d.abort(),15e3);p.signal=d.signal;let g=await fetch(r,p);clearTimeout(x);let h=g.headers.get("content-length");if(h&&parseInt(h)>5242880)return i.NextResponse.json({error:"Response too large"},{status:413});if(g.body){let e=g.body.getReader(),t=[],r=0;for(;;){let{done:o,value:s}=await e.read();if(o)break;if((r+=s.length)>5242880)return e.releaseLock(),i.NextResponse.json({error:"Response too large"},{status:413});t.push(s)}o=new TextDecoder().decode(t.reduce((e,t)=>{let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r},new Uint8Array(0)))}return new i.NextResponse(o,{status:g.status,statusText:g.statusText,headers:{"Content-Type":g.headers.get("content-type")||"application/json","Cache-Control":"public, max-age=300","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization","X-Content-Type-Options":"nosniff","X-Frame-Options":"DENY","X-XSS-Protection":"1; mode=block","Referrer-Policy":"strict-origin-when-cross-origin"}})}catch(e){if(console.error("Proxy error:",e),e instanceof Error&&"AbortError"===e.name)return i.NextResponse.json({error:"Request timeout"},{status:408});return i.NextResponse.json({error:"Proxy request failed",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function x(){return new i.NextResponse(null,{status:200,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization","Access-Control-Max-Age":"86400"}})}let g=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/proxy/route",pathname:"/api/proxy",filename:"route",bundlePath:"app/api/proxy/route"},resolvedPagePath:"c:\\Users\\UserBQ\\Downloads\\mini app\\blocks\\src\\app\\api\\proxy\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:h,workUnitAsyncStorage:f,serverHooks:w}=g;function y(){return(0,a.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:f})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7002:()=>{},8850:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[859,176],()=>r(1646));module.exports=o})();