(()=>{var e={};e.id=974,e.ids=[974],e.modules={189:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var a=s(2966),r=s(4535),n=s(3148);let i=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle",r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",r.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},451:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(2966),r=s(4535),n=s(3148);let i=r.forwardRef(({className:e,type:t,...s},r)=>(0,a.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));i.displayName="Input"},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1820:e=>{"use strict";e.exports=require("os")},1826:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>em});var a=s(2966),r=s(4535),n=s.n(r),i=s(3427),l=s(6916),o=s(3182),d=s(8785),c=s(4223),x=s(9880);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,s=(0,c.s)(e)&&e.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p({children:e,isPresent:t,anchorX:s,root:n}){let i=(0,r.useId)(),l=(0,r.useRef)(null),o=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=(0,r.useContext)(x.Q),c=function(...e){return r.useCallback(function(...e){return t=>{let s=!1,a=e.map(e=>{let a=u(e,t);return s||"function"!=typeof a||(s=!0),a});if(s)return()=>{for(let t=0;t<a.length;t++){let s=a[t];"function"==typeof s?s():u(e[t],null)}}}}(...e),e)}(l,e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:a,top:r,left:c,right:x}=o.current;if(t||!l.current||!e||!a)return;let u="left"===s?`left: ${c}`:`right: ${x}`;l.current.dataset.motionPopId=i;let m=document.createElement("style");d&&(m.nonce=d);let p=n??document.head;return p.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${a}px !important;
            ${u}px !important;
            top: ${r}px !important;
          }
        `),()=>{p.contains(m)&&p.removeChild(m)}},[t]),(0,a.jsx)(m,{isPresent:t,childRef:l,sizeRef:o,children:r.cloneElement(e,{ref:c})})}let g=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:c,anchorX:x,root:u})=>{let m=(0,l.M)(h),g=(0,r.useId)(),f=!0,b=(0,r.useMemo)(()=>(f=!1,{id:g,initial:t,isPresent:s,custom:i,onExitComplete:e=>{for(let t of(m.set(e,!0),m.values()))if(!t)return;n&&n()},register:e=>(m.set(e,!1),()=>m.delete(e))}),[s,m,n]);return o&&f&&(b={...b}),(0,r.useMemo)(()=>{m.forEach((e,t)=>m.set(t,!1))},[s]),r.useEffect(()=>{s||m.size||!n||n()},[s]),"popLayout"===c&&(e=(0,a.jsx)(p,{isPresent:s,anchorX:x,root:u,children:e})),(0,a.jsx)(d.t.Provider,{value:b,children:e})};function h(){return new Map}var f=s(7978);let b=e=>e.key||"";function y(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let v=({children:e,custom:t,initial:s=!0,onExitComplete:n,presenceAffectsLayout:d=!0,mode:c="sync",propagate:x=!1,anchorX:u="left",root:m})=>{let[p,h]=(0,f.xQ)(x),v=(0,r.useMemo)(()=>y(e),[e]),j=x&&!p?[]:v.map(b),N=(0,r.useRef)(!0),w=(0,r.useRef)(v),D=(0,l.M)(()=>new Map),[k,C]=(0,r.useState)(v),[S,P]=(0,r.useState)(v);(0,o.E)(()=>{N.current=!1,w.current=v;for(let e=0;e<S.length;e++){let t=b(S[e]);j.includes(t)?D.delete(t):!0!==D.get(t)&&D.set(t,!1)}},[S,j.length,j.join("-")]);let $=[];if(v!==k){let e=[...v];for(let t=0;t<S.length;t++){let s=S[t],a=b(s);j.includes(a)||(e.splice(t,0,s),$.push(s))}return"wait"===c&&$.length&&(e=$),P(y(e)),C(v),null}let{forceRender:E}=(0,r.useContext)(i.L);return(0,a.jsx)(a.Fragment,{children:S.map(e=>{let r=b(e),i=(!x||!!p)&&(v===S||j.includes(r));return(0,a.jsx)(g,{isPresent:i,initial:(!N.current||!!s)&&void 0,custom:t,presenceAffectsLayout:d,mode:c,root:m,onExitComplete:i?void 0:()=>{if(!D.has(r))return;D.set(r,!0);let e=!0;D.forEach(t=>{t||(e=!1)}),e&&(E?.(),P(w.current),x&&h?.(),n&&n())},anchorX:u,children:e},r)})})};var j=s(2258),N=s(8736),w=s(9155),D=globalThis?.document?r.useLayoutEffect:()=>{},k=s(8693),C=s(2632);function S(){return()=>{}}var P="Avatar",[$,E]=function(e,t=[]){let s=[],n=()=>{let t=s.map(e=>r.createContext(e));return function(s){let a=s?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return n.scopeName=e,[function(t,n){let i=r.createContext(n),l=s.length;s=[...s,n];let o=t=>{let{scope:s,children:n,...o}=t,d=s?.[e]?.[l]||i,c=r.useMemo(()=>o,Object.values(o));return(0,a.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(s,a){let o=a?.[e]?.[l]||i,d=r.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${s}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=s.reduce((t,{useScope:s,scopeName:a})=>{let r=s(e)[`__scope${a}`];return{...t,...r}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}(n,...t)]}(P),[A,M]=$(P),R=r.forwardRef((e,t)=>{let{__scopeAvatar:s,...n}=e,[i,l]=r.useState("idle");return(0,a.jsx)(A,{scope:s,imageLoadingStatus:i,onImageLoadingStatusChange:l,children:(0,a.jsx)(k.sG.span,{...n,ref:t})})});R.displayName=P;var T="AvatarImage",F=r.forwardRef((e,t)=>{let{__scopeAvatar:s,src:n,onLoadingStatusChange:i=()=>{},...l}=e,o=M(T,s),d=function(e,{referrerPolicy:t,crossOrigin:s}){let a=(0,C.useSyncExternalStore)(S,()=>!0,()=>!1),n=r.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[l,o]=r.useState(()=>L(i,e));return D(()=>{o(L(i,e))},[i,e]),D(()=>{let e=e=>()=>{o(e)};if(!i)return;let a=e("loaded"),r=e("error");return i.addEventListener("load",a),i.addEventListener("error",r),t&&(i.referrerPolicy=t),"string"==typeof s&&(i.crossOrigin=s),()=>{i.removeEventListener("load",a),i.removeEventListener("error",r)}},[i,s,t]),l}(n,l),c=function(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}(e=>{i(e),o.onImageLoadingStatusChange(e)});return D(()=>{"idle"!==d&&c(d)},[d,c]),"loaded"===d?(0,a.jsx)(k.sG.img,{...l,ref:t,src:n}):null});F.displayName=T;var B="AvatarFallback",I=r.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:n,...i}=e,l=M(B,s),[o,d]=r.useState(void 0===n);return r.useEffect(()=>{if(void 0!==n){let e=window.setTimeout(()=>d(!0),n);return()=>window.clearTimeout(e)}},[n]),o&&"loaded"!==l.imageLoadingStatus?(0,a.jsx)(k.sG.span,{...i,ref:t}):null});function L(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}I.displayName=B;var z=s(3148);let U=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(R,{ref:s,className:(0,z.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));U.displayName=R.displayName;let O=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(F,{ref:s,className:(0,z.cn)("aspect-square h-full w-full",e),...t}));O.displayName=F.displayName;let W=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(I,{ref:s,className:(0,z.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));W.displayName=I.displayName;var Z=s(8623),q=s(5850);function J(){let{user:e,setUser:t}=(0,Z.Im)(),[s,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),o=async()=>{try{n(!0);let e=await q.fD.initializeAuth();e?(t(e),console.log("‚úÖ User authenticated successfully:",e)):console.error("‚ùå Failed to authenticate user")}catch(e){console.error("Failed to connect wallet:",e)}finally{n(!1)}},d=async()=>{try{n(!0),await q.fD.signOut(),t(null),console.log("‚úÖ User disconnected successfully")}catch(e){console.error("Failed to disconnect:",e)}finally{n(!1)}};return s?(0,a.jsx)(w.$,{disabled:!0,className:"animate-pulse",children:"Connecting..."}):e?(0,a.jsxs)(j.P.div,{className:"flex items-center gap-3 px-4 py-2 rounded-2xl bg-gradient-to-r from-orange-500/20 to-purple-500/20 backdrop-blur-xl border border-white/20 shadow-lg",onHoverStart:()=>l(!0),onHoverEnd:()=>l(!1),whileHover:{scale:1.02,boxShadow:"0 0 25px rgba(255, 120, 0, 0.3)"},transition:{duration:.2},children:[(0,a.jsx)(j.P.div,{animate:i?{rotate:360}:{rotate:0},transition:{duration:.5},children:(0,a.jsxs)(U,{className:"h-10 w-10 ring-2 ring-orange-400 ring-offset-2 ring-offset-transparent",children:[(0,a.jsx)(O,{src:e.pfpUrl,alt:e.username}),(0,a.jsx)(W,{className:"bg-gradient-to-br from-orange-500 to-purple-600 text-white",children:e.username[0]?.toUpperCase()})]})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"text-sm font-bold text-white",children:["@",e.username]}),(0,a.jsx)("span",{className:"text-xs text-orange-300 font-mono",children:e.address.startsWith("fid-")?`FID: ${e.address.replace("fid-","")}`:`${e.address.slice(0,6)}...${e.address.slice(-4)}`})]}),(0,a.jsx)(w.$,{onClick:d,variant:"ghost",size:"sm",className:"text-xs text-red-300 hover:text-red-400 hover:bg-red-500/10",children:"Disconnect"})]}):(0,a.jsx)(j.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,a.jsx)(w.$,{onClick:o,className:"bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700 text-white font-bold shadow-lg",children:"\uD83D\uDD17 Connect"})})}var _=s(189),Q=s(7618),H=s(451),G=s(5563);function V({}){let{user:e,activeRound:t,chatMessages:s,addChatMessage:n}=(0,Z.Im)(),{toast:i}=(0,G.d)(),[l,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),x=(0,r.useRef)(null),u=[...s].sort((e,t)=>t.timestamp-e.timestamp).slice(0,100);return(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-cyan-500/30 h-full flex flex-col shadow-3d",children:[(0,a.jsx)(_.aR,{className:"pb-3",children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-white text-lg",children:[(0,a.jsx)(j.P.span,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:"\uD83D\uDCAC"}),"Live Chat",(0,a.jsxs)(Q.E,{variant:"outline",className:"ml-auto bg-cyan-500/20 text-cyan-300 border-cyan-400/50 text-xs",children:[u.length," messages"]})]})}),(0,a.jsxs)(_.Wu,{className:"flex-1 overflow-hidden flex flex-col",children:[e&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),l.trim()){if(l.length>200)return void i({title:"‚ö†Ô∏è Message Too Long",description:"Maximum 200 characters allowed",variant:"destructive"});try{c(!0);let s={id:`chat-${Date.now()}-${e.address}`,roundId:t?.id||"global",address:e.address,username:e.username,message:l.trim(),pfpUrl:e.pfpUrl,timestamp:Date.now(),type:"chat"};n(s),o(""),i({title:"‚úÖ Message Sent",description:"Your message is now visible to all players"})}catch(e){i({title:"‚ùå Send Failed",description:"Could not send message",variant:"destructive"})}finally{c(!1)}}},className:"flex gap-2",children:[(0,a.jsx)(H.p,{type:"text",placeholder:"Type a message...",value:l,onChange:e=>o(e.target.value),disabled:d,maxLength:200,className:"h-10 text-sm bg-gray-800/50 border-cyan-500/50 text-white placeholder:text-gray-500"}),(0,a.jsx)(w.$,{type:"submit",disabled:!l.trim()||d,className:"h-10 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold text-sm",children:d?"‚öôÔ∏è":"\uD83D\uDCE4"})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden",children:0===u.length?(0,a.jsxs)(j.P.div,{className:"flex flex-col items-center justify-center h-full",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-4xl mb-4",children:"\uD83D\uDCAC"}),(0,a.jsx)("p",{className:"text-gray-400 text-base font-medium",children:"Global Chat Active"}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:t?"Send a message to get started!":"Chat is open - round will start soon"})]}):(0,a.jsxs)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-cyan-600 scrollbar-track-gray-800",children:[(0,a.jsx)(v,{mode:"popLayout",children:u.map((e,t)=>(0,a.jsxs)(j.P.div,{initial:{opacity:0,x:-30,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:30,scale:.9},transition:{delay:.05*t},className:`flex items-start gap-3 p-3 rounded-xl backdrop-blur-xl border ${"winner"===e.type?"glass-card border-yellow-500/50 bg-gradient-to-r from-yellow-500/20 to-orange-500/20":"system"===e.type?"glass-card border-purple-400/50 bg-purple-500/10":"guess"===e.type?"glass-card border-orange-500/50 bg-gradient-to-r from-orange-500/10 to-purple-500/10":"chat"===e.type?"glass-card border-cyan-500/30 bg-cyan-500/5":"glass-card-dark border-gray-500/30"}`,children:[(0,a.jsxs)(U,{className:"h-10 w-10 ring-2 ring-cyan-400/50",children:[(0,a.jsx)(O,{src:e.pfpUrl,alt:e.username}),(0,a.jsx)(W,{className:"bg-gradient-to-br from-cyan-500 to-blue-500 text-white text-xs",children:e.username[0]?.toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:`font-bold text-sm ${"winner"===e.type?"text-yellow-300":"text-white"}`,children:["@",e.username]}),(0,a.jsxs)("span",{className:"text-[10px] text-gray-500 font-mono",children:[e.address.slice(0,6),"...",e.address.slice(-4)]}),"winner"===e.type&&(0,a.jsx)(Q.E,{className:"bg-yellow-500/20 text-yellow-300 border-yellow-400/50 text-xs",children:"\uD83D\uDC51 Winner"}),"guess"===e.type&&(0,a.jsx)(Q.E,{className:"bg-orange-500/20 text-orange-300 border-orange-400/50 text-xs",children:"\uD83C\uDFAF Guess"})]}),(0,a.jsx)("p",{className:`text-sm ${"winner"===e.type?"text-yellow-200 font-semibold":"system"===e.type?"text-purple-200":"guess"===e.type?"text-orange-200 font-semibold":"text-gray-300"}`,children:e.message}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500 mt-1 block",children:new Date(e.timestamp).toLocaleTimeString()})]})]},e.id))}),(0,a.jsx)("div",{ref:x})]})})]})]})}var K=s(4445),Y=s(8358);function X({walletAddress:e}){let[t,s]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),d=async()=>{if(!n){i(!0),o(null);try{let t=await fetch("/api/base-balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e})});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let a=await t.json();if(!a.success)throw Error(a.error||"Failed to fetch balances");s(a.balances)}catch(e){console.error("Error fetching balances:",e),o(e instanceof Error?e.message:"Failed to fetch balances")}finally{i(!1)}}};return l?(0,a.jsx)(_.Zp,{className:"glass-card-dark p-4 border border-red-500/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-red-400",children:["‚ùå ",l]}),(0,a.jsx)(w.$,{onClick:d,variant:"outline",size:"sm",className:"text-xs",children:"\uD83D\uDD04 Retry"})]})}):n||!t?(0,a.jsx)(_.Zp,{className:"glass-card-dark p-4 border border-blue-500/30",children:(0,a.jsx)("p",{className:"text-sm text-blue-300 text-center",children:"‚è≥ Loading balances..."})}):(0,a.jsx)(_.Zp,{className:"glass-card-dark p-4 border border-green-500/30",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm font-bold text-green-300",children:"\uD83D\uDCB0 Wallet Balances (Base Chain)"}),(0,a.jsx)(w.$,{onClick:d,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-gray-400 hover:text-white",children:"\uD83D\uDD04"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"glass-card p-3 rounded-lg border border-gray-600/30",children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-400 mb-1",children:"ETH"}),(0,a.jsx)("div",{className:"text-sm font-bold text-white",children:t.eth})]}),(0,a.jsxs)("div",{className:"glass-card p-3 rounded-lg border border-gray-600/30",children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-400 mb-1",children:"USDC"}),(0,a.jsx)("div",{className:"text-sm font-bold text-white",children:t.usdc})]}),(0,a.jsxs)("div",{className:"glass-card p-3 rounded-lg border border-gray-600/30",children:[(0,a.jsx)("div",{className:"text-[10px] text-gray-400 mb-1",children:"$SECONDS"}),(0,a.jsx)("div",{className:"text-sm font-bold text-white",children:t.seconds})]})]}),(0,a.jsxs)("p",{className:"text-[9px] text-gray-500 text-center mt-2",children:["\uD83D\uDCCD Address: ",e.startsWith("fid-")?`FID: ${e.replace("fid-","")}`:`${e.slice(0,6)}...${e.slice(-4)}`]})]})})}function ee(){let{user:e,createRound:t,endRound:s,updateRoundResult:n,activeRound:i,rounds:l,getGuessesForRound:o,connected:d,client:c,prizeConfig:x}=(0,Z.Im)(),{toast:u}=(0,G.d)(),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(""),[N,D]=(0,r.useState)(""),[k,C]=(0,r.useState)("10"),[S,P]=(0,r.useState)(""),[$,E]=(0,r.useState)(""),[A,M]=(0,r.useState)(""),[R,T]=(0,r.useState)("");if(!e||!(0,Z.gD)(e.address))return(0,a.jsx)(a.Fragment,{});let F=async()=>{if(!y)return void u({title:"‚ö†Ô∏è Missing Round Number",description:"Please enter a round number",variant:"destructive"});if(!N)return void u({title:"‚ö†Ô∏è Missing Block Number",description:"Please enter a target block number",variant:"destructive"});if(!k)return void u({title:"‚ö†Ô∏è Missing Duration",description:"Please enter round duration in minutes",variant:"destructive"});let e=parseInt(y);if(isNaN(e)||e<=0)return void u({title:"‚ö†Ô∏è Invalid Round Number",description:"Please enter a valid positive round number",variant:"destructive"});let s=parseInt(N);if(isNaN(s)||s<=0)return void u({title:"‚ö†Ô∏è Invalid Block Number",description:"Please enter a valid positive block number",variant:"destructive"});let a=parseInt(k);if(isNaN(a)||a<=0)return void u({title:"‚ö†Ô∏è Invalid Duration",description:"Please enter a valid positive duration in minutes",variant:"destructive"});let r=Date.now(),n=r+60*a*1e3,i=`${S} ${R}`;try{p(!0),await t(e,r,n,i,s,a);let l=`${S} ${R}`,o=`üîî Round #${e} Started!

Guess how many transactions will be in the next Bitcoin block ‚õèÔ∏è

üí∞ Jackpot: ${l}
üéØ Target Block: #${s}
‚è± Duration: ${a} minutes

#BitcoinBlocks`;await L(o),u({title:"‚úÖ Round Started",description:`Round #${e} - Block #${s} - ${a} min`}),v(""),D(""),C("10"),"mock"!==Y.vQ.mode&&s&&U(s)}catch(e){u({title:"‚ùå Failed",description:e instanceof Error?e.message:"Failed to start round",variant:"destructive"})}finally{p(!1)}},B=async()=>{if(!i)return void u({title:"‚ö†Ô∏è No Active Round",description:"There is no round to end",variant:"destructive"});try{p(!0),await s(i.id)?u({title:"‚úÖ Round Ended",description:"Submissions are now locked - round in wait state"}):u({title:"‚ùå Error",description:"Failed to end round",variant:"destructive"})}catch(e){u({title:"‚ùå Error",description:e instanceof Error?e.message:"Failed to end round",variant:"destructive"})}finally{p(!1)}},I=async()=>{let e=l.find(e=>"closed"===e.status);if(!e)return void u({title:"‚ö†Ô∏è No Closed Round",description:"End a round first before posting results",variant:"destructive"});if(!e.blockNumber)return void u({title:"‚ö†Ô∏è No Block Number",description:"Round does not have a target block",variant:"destructive"});let t=o(e.id);if(0===t.length)return void u({title:"‚ö†Ô∏è No Predictions",description:`Round #${e.roundNumber||e.id} has no player predictions. Cannot calculate winners.`,variant:"destructive"});try{if(p(!0),"mock"===Y.vQ.mode){let s=Math.floor(1e3*Math.random())+2500,a=`0000000000000000000${Math.random().toString(36).substring(2,15)}`,r=[...t].sort((e,t)=>{let a=Math.abs(e.guess-s),r=Math.abs(t.guess-s);return a!==r?a-r:e.submittedAt-t.submittedAt}),i=r[0],l=r[1];await n(e.id,s,a,i.address);let o=`${S} ${R}`,d=`üìä Block #${e.blockNumber} had ${s.toLocaleString()} transactions.

ü•á Winner: @${i.username}
ü•à Runner-Up: ${l?`@${l.username}`:"N/A"}

üí∞ Jackpot is now: ${o}

#BitcoinBlocks`;console.log("[MOCK MODE] Farcaster announcement:",d),await L(d),u({title:"\uD83C\uDF89 Results Posted! (Mock)",description:`Winner: @${i.username} - ${s} tx simulated`});return}let s=await fetch(`/api/mempool?action=block-at-time&timestamp=${Math.floor(e.endTime/1e3)}`);if(!s.ok)throw Error(`Block #${e.blockNumber} not found yet. Try again later.`);let a=await s.json(),r=a.txCount,i=a.blockHash,l=o(e.id);if(0===t.length)throw Error("No predictions in this round");let d=[...l].sort((e,t)=>{let s=Math.abs(e.guess-r),a=Math.abs(t.guess-r);return s!==a?s-a:e.submittedAt-t.submittedAt}),c=d[0],x=d[1];await n(e.id,r,i,c.address);let m=`${S} ${R}`,g=`üìä Block #${e.blockNumber} had ${r.toLocaleString()} transactions.

ü•á Winner: @${c.username}
ü•à Runner-Up: ${x?`@${x.username}`:"N/A"}

üí∞ Jackpot is now: ${m}

#BitcoinBlocks`;await L(g),u({title:"\uD83C\uDF89 Results Posted!",description:`Winner: @${c.username} - announced on Farcaster`})}catch(e){u({title:"‚ùå Failed",description:e instanceof Error?e.message:"Failed to post results",variant:"destructive"})}finally{p(!1)}},L=async t=>{if(e&&(0,Z.gD)(e.address))try{let s=await fetch("/api/farcaster-announce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,address:e.address})}),a=await s.json();if(!a.success)throw Error(a.error||"Failed to announce")}catch(e){console.error("Announcement error:",e)}},z=async()=>{if(!c||!d)return void u({title:"‚ö†Ô∏è Not Connected",description:"Please wait for database connection",variant:"destructive"});let e=parseFloat(S.replace(/,/g,"")),t=parseFloat($.replace(/,/g,"")),s=parseFloat(A.replace(/,/g,""));if(isNaN(e)||e<=0)return void u({title:"‚ö†Ô∏è Invalid Jackpot Amount",description:"Please enter a valid positive number",variant:"destructive"});if(isNaN(t)||t<=0)return void u({title:"‚ö†Ô∏è Invalid 1st Place Prize",description:"Please enter a valid positive number",variant:"destructive"});if(isNaN(s)||s<=0)return void u({title:"‚ö†Ô∏è Invalid 2nd Place Prize",description:"Please enter a valid positive number",variant:"destructive"});if(!R||""===R.trim())return void u({title:"‚ö†Ô∏è Missing Currency",description:"Please enter a currency type",variant:"destructive"});try{if(p(!0),!await c.updatePrizeConfiguration({jackpotAmount:S,firstPlaceAmount:$,secondPlaceAmount:A,currencyType:R.trim(),tokenContractAddress:""}))throw Error("Failed to save prize configuration");u({title:"‚úÖ Prize Config Saved",description:`Jackpot: ${S} ${R}, 1st: ${$}, 2nd: ${A} ${R}`})}catch(e){u({title:"‚ùå Failed to Save",description:e instanceof Error?e.message:"Failed to save prize config",variant:"destructive"})}finally{p(!1)}},U=async e=>{if("mock"===Y.vQ.mode)return;h(!0),b(!1);let t=async()=>{try{let t=await fetch("/api/mempool?action=recent-blocks");if(t.ok&&(await t.json()).some(t=>t.height===e))return console.log(`‚úÖ Block #${e} is now available on mempool.space!`),!0;return!1}catch(t){return console.log(`‚è≥ Block #${e} not yet available...`),!1}},s=setInterval(async()=>{if(!i||"open"!==i.status){clearInterval(s),h(!1);return}await t()&&(b(!0),h(!1),clearInterval(s),i&&"open"===i.status&&(u({title:"\uD83C\uDFAF Target Block Found!",description:`Block #${e} is available. Auto-closing round...`}),setTimeout(async()=>{try{await B(),u({title:"‚úÖ Round Auto-Closed",description:"Round closed automatically. You can now post results."})}catch(e){console.error("Failed to auto-close round:",e)}},2e3)))},3e4);await t()&&(b(!0),h(!1),clearInterval(s))};return(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},children:(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-2 border-yellow-500/50 shadow-2xl shadow-yellow-500/20",children:[(0,a.jsx)(_.aR,{className:"pb-3 border-b border-yellow-500/30",children:(0,a.jsxs)(_.ZB,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.P.span,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},className:"text-3xl",children:"\uD83D\uDEE0Ô∏è"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xl font-black gradient-text",children:"Admin Panel"}),(0,a.jsx)("div",{className:"text-[10px] text-yellow-300 font-normal",children:"Manage rounds & configure prizes"})]})]}),(0,a.jsx)(Q.E,{variant:"outline",className:`${"mock"===Y.vQ.mode?"bg-purple-500/20 text-purple-300 border-purple-400/50":"bg-red-500/20 text-red-300 border-red-400/50"} text-xs px-3 py-1`,children:"mock"===Y.vQ.mode?"\uD83E\uDDEA MOCK MODE":"\uD83D\uDD34 REAL-TIME"})]})}),(0,a.jsxs)(_.Wu,{className:"pt-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"glass-card p-6 rounded-2xl space-y-4 border border-green-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDE80"}),(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"Start New Round"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Opens new round for guesses & auto-posts to Farcaster"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(K.J,{className:"text-gray-300 text-sm font-bold",children:["\uD83D\uDD22 Round Number ",(0,a.jsx)("span",{className:"text-gray-500 font-normal text-xs",children:"(sequential: 1, 2, 3...)"})]}),(0,a.jsx)(H.p,{type:"number",placeholder:"Enter: 1, 2, 3, 4, 5... (NOT block number!)",value:y,onChange:e=>v(e.target.value),disabled:m||!d,className:"bg-gray-800/50 border-gray-600/50 text-white h-12 placeholder:text-gray-500"}),(0,a.jsx)("p",{className:"text-[10px] text-green-400",children:"‚úÖ Example: Round 1, Round 2, Round 3"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(K.J,{className:"text-gray-300 text-sm font-bold",children:["\uD83E\uDDF1 Target Block Number ",(0,a.jsx)("span",{className:"text-gray-500 font-normal text-xs",children:"(from mempool.space)"})]}),(0,a.jsx)(H.p,{type:"number",placeholder:"Enter: 919185, 875420... (Bitcoin block height)",value:N,onChange:e=>D(e.target.value),disabled:m||!d,className:"bg-gray-800/50 border-gray-600/50 text-white h-12 placeholder:text-gray-500"}),(0,a.jsx)("p",{className:"text-[10px] text-cyan-400",children:"‚úÖ Example: Block #919185 (6-digit number)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(K.J,{className:"text-gray-300 text-sm font-bold",children:["‚è± Round Duration ",(0,a.jsx)("span",{className:"text-gray-500 font-normal text-xs",children:"(in minutes)"})]}),(0,a.jsx)(H.p,{type:"number",placeholder:"e.g., 10, 15, 30 minutes",value:k,onChange:e=>C(e.target.value),disabled:m||!d,className:"bg-gray-800/50 border-gray-600/50 text-white h-12 placeholder:text-gray-500"}),(0,a.jsx)("p",{className:"text-[10px] text-orange-400",children:"‚úÖ Default: 10 minutes"})]})]}),(0,a.jsx)(w.$,{onClick:F,disabled:m||!d,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold h-12",children:m?"‚öôÔ∏è Starting...":"\uD83D\uDD14 Start Round & Announce"})]}),(0,a.jsxs)("div",{className:"glass-card p-6 rounded-2xl space-y-4 border border-purple-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAE"}),(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"Manage Round"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"mock"===Y.vQ.mode?"End round, simulate & post results":"End round or fetch results from mempool.space (auto-closes when target block available)"}),i?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"glass-card-dark p-3 rounded-lg border border-gray-600/30",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Round #:"}),(0,a.jsx)("span",{className:"text-orange-400 font-bold",children:i.roundNumber||"N/A"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Target Block:"}),(0,a.jsxs)("span",{className:"text-cyan-400 font-bold",children:["#",i.blockNumber||"N/A"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Total Guesses:"}),(0,a.jsx)("span",{className:"text-green-400 font-bold",children:o(i.id).length})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,a.jsx)("span",{className:`font-bold ${"open"===i.status?"text-green-400":"closed"===i.status?"text-yellow-400":"text-purple-400"}`,children:i.status.toUpperCase()})]})]}),g&&"mock"!==Y.vQ.mode&&(0,a.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-blue-500/30",children:(0,a.jsxs)("p",{className:"text-xs text-blue-300 text-center",children:["\uD83D\uDD0D Checking mempool.space for Block #",i.blockNumber,"..."]})}),f&&"mock"!==Y.vQ.mode&&(0,a.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-green-500/30",children:(0,a.jsxs)("p",{className:"text-xs text-green-300 text-center",children:["‚úÖ Block #",i.blockNumber," found on mempool.space!"]})})]}):(0,a.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-gray-600/30",children:(0,a.jsx)("p",{className:"text-xs text-gray-400 text-center py-2",children:"‚ö†Ô∏è No active round"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)(w.$,{onClick:B,variant:"destructive",disabled:m||!d||!i||"open"!==i.status,className:"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 font-bold h-12 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?"‚öôÔ∏è":"\uD83D\uDD12",(0,a.jsx)("span",{className:"ml-1 text-xs",children:m?"Ending...":"End Round"})]}),(0,a.jsxs)(w.$,{onClick:I,disabled:m||!d||!l.find(e=>"closed"===e.status),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold h-12 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?"‚öôÔ∏è":"\uD83D\uDCE1",(0,a.jsx)("span",{className:"ml-1 text-xs",children:m?"mock"===Y.vQ.mode?"Simulating...":"Fetching...":"Post Results"})]})]}),(0,a.jsx)("div",{className:"text-[10px] text-gray-500 text-center",children:i||l.find(e=>"closed"===e.status)?i?.status==="open"?"End round to enable posting results":l.find(e=>"closed"===e.status)?"Ready to post results":"Results already posted":"Create a round first"})]}),(0,a.jsxs)("div",{className:"glass-card p-6 rounded-2xl space-y-4 border border-blue-500/30 lg:col-span-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCB0"}),(0,a.jsx)("h3",{className:"text-base font-bold text-white",children:"Set Prizes / Currency"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.J,{className:"text-gray-300 text-sm",children:"Jackpot Amount"}),(0,a.jsx)(H.p,{type:"text",placeholder:"5000 (enter numbers only)",value:S,onChange:e=>P(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"}),(0,a.jsx)("p",{className:"text-[10px] text-gray-400",children:"Enter amount without commas or currency symbols"})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.J,{className:"text-gray-300 text-sm",children:"1st Place Prize"}),(0,a.jsx)(H.p,{type:"text",placeholder:"1000",value:$,onChange:e=>E(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.J,{className:"text-gray-300 text-sm",children:"2nd Place Prize"}),(0,a.jsx)(H.p,{type:"text",placeholder:"500",value:A,onChange:e=>M(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.J,{className:"text-gray-300 text-sm",children:"Prize Currency"}),(0,a.jsx)(H.p,{type:"text",placeholder:"$SECOND, USDC, ETH",value:R,onChange:e=>T(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.J,{className:"text-gray-300 text-sm font-bold",children:"\uD83D\uDCB3 Admin Wallet Balances"}),(0,a.jsx)(X,{walletAddress:e.address}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500 text-center",children:"\uD83D\uDCCD Base Chain  | \uD83D\uDCB0 Available for rewards: ETH, USDC, $SECONDS"})]}),(0,a.jsx)(w.$,{onClick:z,disabled:m||!d,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-bold h-12",children:m?"‚öôÔ∏è Saving...":"\uD83D\uDCBE Save Prize Configuration"}),(0,a.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-blue-500/30",children:(0,a.jsx)("p",{className:"text-xs text-blue-300",children:"\uD83D\uDCA1 Save your prize configuration to database. These values will be used when creating new rounds."})})]})]}),(0,a.jsx)("div",{className:"glass-card-dark p-4 rounded-xl border border-cyan-500/30",children:(0,a.jsxs)("p",{className:"text-sm text-cyan-300",children:[(0,a.jsx)("span",{className:"font-bold",children:"‚ÑπÔ∏è Auto-Announcement:"})," Starting rounds and posting results will automatically announce on Farcaster with formatted messages.","mock"===Y.vQ.mode&&(0,a.jsx)("span",{className:"text-purple-300 ml-2",children:"(Mock mode: announcements logged to console)"})]})})]})]})})}function et(){let{user:e,activeRound:t,submitGuess:s,hasUserGuessed:n,connected:i,loadingStates:l,errorStates:o,optimisticActions:d}=(0,Z.Im)(),{toast:c}=(0,G.d)(),[x,u]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),{getGuessesForRound:y}=(0,Z.Im)(),v=(0,r.useMemo)(()=>t&&e?y(t.id).filter(t=>t.address.toLowerCase()===e.address.toLowerCase()):[],[t,e,y]),N=(0,r.useMemo)(()=>t?.status!=="open",[t?.status]),D=(0,r.useMemo)(()=>!!e&&!!t&&n(t.id,e.address),[e,t,n]),k=(0,r.useCallback)(e=>{if(!e.trim())return{isValid:!1,error:null};let t=parseInt(e,10);return isNaN(t)?{isValid:!1,error:"Must be a valid number"}:t<1||t>2e4?{isValid:!1,error:"Must be between 1 and 20,000"}:e.includes(".")||e.includes(",")?{isValid:!1,error:"No decimals allowed"}:{isValid:!0,error:null}},[]),C=(0,r.useCallback)(e=>{let t=e.target.value;(""===t||/^\d+$/.test(t))&&u(t)},[]),S=async a=>{if(a.preventDefault(),!e)return void c({title:"\uD83D\uDD10 Authentication Required",description:"Please sign in with Farcaster first",variant:"destructive"});if(!t)return void c({title:"‚ö†Ô∏è No Active Round",description:"Wait for a round to start",variant:"destructive"});if(N)return void c({title:"‚ùå Too late! Round is locked.",description:"Submissions are closed for this round",variant:"destructive"});let{isValid:r,error:n}=k(x);if(!r||n)return void c({title:"‚ö†Ô∏è Invalid Input",description:n||"Please enter a valid number between 1 and 20,000",variant:"destructive"});if(D)return void c({title:"‚ùå Already Submitted",description:"One guess per round. Submit before the block is mined.",variant:"destructive"});let i=parseInt(x,10);try{p(!0),await s(t.id,e.address,e.username,i,e.pfpUrl)?(c({title:"‚úÖ Guess Submitted!",description:`Your prediction: ${i.toLocaleString()} transactions`}),u(""),b(null)):c({title:"‚ùå Submission Failed",description:"Could not submit prediction. Please try again.",variant:"destructive"})}catch(e){c({title:"‚ö†Ô∏è Error",description:e instanceof Error?e.message:"Failed to submit prediction",variant:"destructive"})}finally{p(!1)}},P=(0,r.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S(e))},[S]);return(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-orange-500/30 h-full shadow-3d",children:[(0,a.jsx)(_.aR,{className:"pb-3",children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-white text-lg",children:[(0,a.jsx)(j.P.span,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:"\uD83D\uDD22"}),"Submit Your Guess"]})}),(0,a.jsxs)(_.Wu,{className:"space-y-4",children:[(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.J,{className:"text-gray-300 text-sm font-semibold",children:"\uD83C\uDFAF Your Prediction"}),(0,a.jsx)(H.p,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:e?t?"Enter tx count (1-20,000)":"Waiting for round...":"Sign in to predict...",value:x,onChange:C,onKeyDown:P,disabled:m||N||!i||!e||!t||D,required:!0,className:`h-14 text-lg font-bold text-center bg-gray-800/50 border-2 transition-all rounded-xl ${f?"border-red-500/50 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-orange-500/50 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/50"} text-white placeholder:text-gray-500`}),f&&(0,a.jsxs)(j.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[(0,a.jsx)("span",{children:"‚ö†Ô∏è"}),(0,a.jsx)("span",{children:f})]})]}),i?e?t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.$,{type:"submit",className:"w-full h-12 text-base font-bold bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:m||N||!i||D||g||!!f,children:m?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.P.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"‚öôÔ∏è"}),"Submitting..."]}):D?"‚úÖ Already Submitted":N?"\uD83D\uDD12 Round Locked":i?g?"‚è≥ Validating...":"\uD83D\uDE80 Submit Prediction":"\uD83D\uDD0C Connecting..."}),N&&(0,a.jsx)(j.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass-card p-3 rounded-lg border border-red-500/30 bg-red-500/10",children:(0,a.jsx)("p",{className:"text-sm text-red-300 text-center font-semibold",children:"‚ùå Round Locked - Submissions Closed"})}),(0,a.jsx)("div",{className:"glass-card p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:(0,a.jsx)("p",{className:"text-xs text-blue-300 text-center",children:"\uD83D\uDCA1 Your prediction will be saved below"})})]}):(0,a.jsxs)(j.P.div,{className:"glass-card p-4 rounded-xl text-center border border-yellow-500/30",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-2xl mb-2",children:"‚è≥"}),(0,a.jsx)("p",{className:"text-yellow-300 text-sm font-medium",children:"Waiting for next round to start..."}),(0,a.jsx)("p",{className:"text-yellow-400 text-xs mt-2",children:"\uD83D\uDCA1 Admin: Create a round in the Admin Panel below"})]}):(0,a.jsxs)(j.P.div,{className:"glass-card p-4 rounded-xl text-center border border-gray-500/30",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-2xl mb-2",children:"\uD83D\uDD12"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm font-medium",children:"Sign in with Farcaster to participate"})]}):(0,a.jsxs)(j.P.div,{className:"glass-card p-4 rounded-xl text-center border border-yellow-500/30",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-2xl mb-2",children:"\uD83D\uDD0C"}),(0,a.jsx)("p",{className:"text-yellow-300 text-sm font-medium",children:"Connecting to database..."})]})]}),e&&t&&v.length>0&&(0,a.jsxs)(j.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2 pt-4 border-t border-gray-700/50",children:[(0,a.jsx)(K.J,{className:"text-gray-400 text-xs font-semibold uppercase tracking-wide",children:"‚ú® Your Prediction"}),(0,a.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,a.jsx)(j.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"glass-card p-3 rounded-lg border-2 border-orange-500/40 bg-gradient-to-r from-orange-500/10 to-purple-500/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-orange-200 font-bold text-base",children:[e.guess.toLocaleString()," transactions"]}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:new Date(e.submittedAt).toLocaleTimeString()})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 bg-orange-500/20 border border-orange-500/40 rounded text-orange-300 text-xs font-bold",children:"YOU"})]})},e.id))})]}),D&&0===v.length&&(0,a.jsxs)(j.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"glass-card p-4 rounded-xl text-center border-2 border-green-500/50 bg-green-500/10",children:[(0,a.jsx)("p",{className:"text-3xl mb-2",children:"‚úÖ"}),(0,a.jsx)("p",{className:"text-green-300 text-sm font-bold",children:"Guess Submitted!"}),(0,a.jsx)("p",{className:"text-green-400 text-xs mt-1",children:"One prediction per round"})]})]})]})}function es({}){let{activeRound:e,getGuessesForRound:t}=(0,Z.Im)(),s=e?t(e.id):[],r=[...s].sort((t,s)=>{if(e&&void 0!==e.actualTxCount){let a=Math.abs(t.guess-e.actualTxCount),r=Math.abs(s.guess-e.actualTxCount);return a!==r?a-r:t.submittedAt-s.submittedAt}return s.submittedAt-t.submittedAt}).slice(0,3),n=!!e&&"finished"===e.status&&void 0!==e.actualTxCount;return(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-purple-500/30 h-full shadow-3d",children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-white text-2xl",children:[(0,a.jsx)(j.P.span,{animate:{rotate:[0,15,-15,0]},transition:{duration:2,repeat:1/0},children:"\uD83C\uDFC6"}),"Leaderboard"]})}),(0,a.jsx)(_.Wu,{children:e?0===s.length?(0,a.jsxs)(j.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-4xl mb-4",children:"\uD83C\uDFAF"}),(0,a.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"No entries yet"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Leaderboard will appear after predictions"})]}):(0,a.jsx)("div",{className:"space-y-3",children:(0,a.jsx)(v,{mode:"popLayout",children:r.map((t,s)=>{let r=n&&0===s,i=n&&s<3,l=e&&void 0!==e.actualTxCount?Math.abs(t.guess-e.actualTxCount):null;return(0,a.jsxs)(j.P.div,{initial:{opacity:0,x:-50,scale:.8},animate:{opacity:1,x:0,scale:1,...r&&{boxShadow:["0 0 0px rgba(234, 179, 8, 0)","0 0 30px rgba(234, 179, 8, 0.6)","0 0 0px rgba(234, 179, 8, 0)"]}},exit:{opacity:0,x:50,scale:.8},transition:{duration:.3,delay:.05*s,...r&&{boxShadow:{duration:2,repeat:1/0}}},whileHover:{scale:1.02,y:-2},className:`relative flex items-center justify-between p-4 rounded-xl border backdrop-blur-xl shadow-3d-sm hover:shadow-3d-md transition-all ${r?"glass-card border-2 border-yellow-500/70 bg-gradient-to-r from-yellow-500/30 to-orange-500/30":i?"glass-card border-purple-400/50 bg-gradient-to-r from-purple-500/20 to-pink-500/20":"glass-card-dark border-gray-500/30"} overflow-hidden`,children:[r&&(0,a.jsx)(j.P.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-yellow-400/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0}}),(0,a.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,a.jsx)(j.P.div,{className:`flex items-center justify-center w-10 h-10 rounded-full font-black text-lg ${r?"bg-gradient-to-br from-yellow-400 to-orange-500 text-white shadow-lg shadow-yellow-500/50":1===s?"bg-gradient-to-br from-gray-300 to-gray-400 text-gray-800":2===s?"bg-gradient-to-br from-amber-600 to-amber-700 text-white":"bg-gray-700/50 text-gray-400"}`,animate:r?{rotate:[0,10,-10,0]}:{},transition:{duration:.5,repeat:r?1/0:0},children:0===s&&n?"\uD83D\uDC51":`#${s+1}`}),(0,a.jsxs)(U,{className:`h-12 w-12 ring-2 ${r?"ring-yellow-400 ring-offset-2 ring-offset-black":"ring-gray-500/50"}`,children:[(0,a.jsx)(O,{src:t.pfpUrl,alt:t.username}),(0,a.jsx)(W,{className:`${r?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-gradient-to-br from-purple-500 to-pink-500"} text-white font-bold`,children:t.username[0]?.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:`font-bold ${r?"text-yellow-300 text-lg":"text-white"}`,children:["@",t.username]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:new Date(t.submittedAt).toLocaleTimeString()})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 relative z-10",children:[(0,a.jsxs)(Q.E,{variant:r?"default":"secondary",className:`${r?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-black border-none shadow-lg":"bg-gray-700/50 text-gray-200 border-gray-600/50"} px-3 py-1`,children:[t.guess.toLocaleString()," txs"]}),null!==l&&(0,a.jsx)(Q.E,{variant:"outline",className:`text-xs px-2 py-1 ${r?"bg-yellow-500/20 text-yellow-300 border-yellow-400/50 font-bold":"bg-gray-700/30 text-gray-400 border-gray-600/30"}`,children:r?"\uD83C\uDFC6 WINNER!":`\xb1${l.toLocaleString()}`})]})]},t.id)})})}):(0,a.jsxs)(j.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-4xl mb-4",children:"‚è≥"}),(0,a.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"Waiting for round..."}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Leaderboard will appear when round starts"})]})})]})}function ea({}){let{activeRound:e,getGuessesForRound:t}=(0,Z.Im)(),s=e?t(e.id):[],r=[...s].sort((e,t)=>t.submittedAt-e.submittedAt);return(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-purple-500/30 h-full shadow-3d",children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex flex-col gap-2 text-white text-2xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.P.span,{animate:{rotate:[0,15,-15,0]},transition:{duration:2,repeat:1/0},children:"\uD83C\uDF10"}),"All Predictions (",s.length,")"]}),(0,a.jsx)("div",{className:"flex items-center gap-2 text-xs font-normal",children:(0,a.jsxs)(Q.E,{variant:"outline",className:"bg-green-500/20 text-green-300 border-green-400/50",children:[(0,a.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-400 rounded-full mr-1.5 animate-pulse"}),"Live Updates"]})})]})}),(0,a.jsx)(_.Wu,{children:e?0===s.length?(0,a.jsxs)(j.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-4xl mb-4",children:"\uD83C\uDFB2"}),(0,a.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"No predictions yet"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Be the first to guess!"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-purple-600 scrollbar-track-gray-800",children:(0,a.jsx)(v,{mode:"popLayout",children:r.map((e,t)=>(0,a.jsxs)(j.P.div,{initial:{opacity:0,x:-50,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.8},transition:{duration:.3,delay:.05*t},whileHover:{scale:1.02,y:-2},className:"relative flex items-center justify-between p-4 rounded-xl border backdrop-blur-xl glass-card-dark border-gray-500/30 overflow-hidden shadow-3d-sm hover:shadow-3d-md transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,a.jsxs)(U,{className:"h-12 w-12 ring-2 ring-gray-500/50",children:[(0,a.jsx)(O,{src:e.pfpUrl,alt:e.username}),(0,a.jsx)(W,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white font-bold",children:e.username[0]?.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-white flex items-center gap-2",children:e.username}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["@",e.username," ‚Ä¢ ",new Date(e.submittedAt).toLocaleTimeString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 relative z-10",children:[(0,a.jsxs)(Q.E,{variant:"secondary",className:"bg-purple-700/50 text-purple-200 border-purple-600/50 px-3 py-1 font-bold",children:[e.guess.toLocaleString()," tx"]}),(0,a.jsx)(j.P.span,{className:"text-2xl",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,delay:.1*t},children:"\uD83C\uDFB2"})]})]},e.id))})}):(0,a.jsxs)(j.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-4xl mb-4",children:"‚è≥"}),(0,a.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"Waiting for round..."}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Predictions will appear when round starts"})]})})]})}function er({}){let[e,t]=(0,r.useState)(0);return(0,a.jsxs)(j.P.div,{initial:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-orange-900",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/10 to-transparent",style:{backgroundImage:`
                 linear-gradient(rgba(255, 120, 0, 0.1) 1px, transparent 1px),
                 linear-gradient(90deg, rgba(255, 120, 0, 0.1) 1px, transparent 1px)
               `,backgroundSize:"50px 50px"}}),!1]}),(0,a.jsxs)("div",{className:"relative z-10 text-center space-y-8",children:[(0,a.jsx)(j.P.div,{animate:{rotate:360,scale:[1,1.1,1]},transition:{rotate:{duration:3,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0}},className:"mx-auto w-24 h-24 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-6xl",children:"\uD83D\uDEE0Ô∏è"})}),(0,a.jsxs)(j.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-white mb-2",children:"Bitcoin Blocks"}),(0,a.jsx)("p",{className:"text-orange-300 text-lg",children:"Predicting Bitcoin's Future"})]}),(0,a.jsxs)("div",{className:"w-80 mx-auto",children:[(0,a.jsx)("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden backdrop-blur-sm",children:(0,a.jsx)(j.P.div,{className:"h-full bg-gradient-to-r from-orange-500 via-purple-500 to-orange-500",initial:{width:0},animate:{width:`${e}%`},transition:{duration:.3}})}),(0,a.jsxs)(j.P.p,{className:"text-white text-sm mt-2",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e<30&&"Connecting to blockchain...",e>=30&&e<60&&"Loading real-time data...",e>=60&&e<90&&"Initializing game state...",e>=90&&"Ready to predict!"]})]}),(0,a.jsx)("div",{className:"flex justify-center gap-2",children:[0,1,2,3].map(e=>(0,a.jsx)(j.P.div,{className:"w-3 h-3 bg-orange-500 rounded",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:.2*e}},e))})]})]})}function en({}){let e=(0,r.useRef)(null);return(0,a.jsx)("canvas",{ref:e,className:"fixed inset-0 pointer-events-none opacity-30",style:{zIndex:0}})}function ei({}){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null),o=e=>`${e.substring(0,10)}...${e.substring(e.length-10)}`,d=e=>{let t=new Date(1e3*e),s=Math.floor((new Date().getTime()-t.getTime())/1e3/60);return s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:`${Math.floor(s/1440)}d ago`};return(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-orange-500/50 shadow-3d",children:[(0,a.jsx)(_.aR,{className:"pb-3 border-b border-orange-500/20",children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-3 text-white text-xl",children:[(0,a.jsx)(j.P.span,{animate:{scale:[1,1.3,1],rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0},className:"text-3xl",children:"\uD83D\uDCE6"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-lg font-black gradient-text",children:"Recent Bitcoin Blocks"}),(0,a.jsx)("div",{className:"text-[10px] text-orange-300 font-normal",children:"Live blockchain data from mempool.space"})]}),(0,a.jsx)(Q.E,{variant:"outline",className:"bg-orange-500/20 text-orange-300 border-orange-400/50 text-xs px-3 py-1",children:"Last 5 Blocks"})]})}),(0,a.jsx)(_.Wu,{className:"pt-4",children:s?(0,a.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-orange-600 scrollbar-track-gray-800",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)(j.P.div,{className:"glass-card p-4 rounded-xl min-w-[280px]",animate:{opacity:[.3,.6,.3]},transition:{duration:1.5,repeat:1/0,delay:.1*t},children:[(0,a.jsx)("div",{className:"h-4 bg-gray-600/50 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-700/50 rounded w-1/2"})]},t))}):i?(0,a.jsxs)(j.P.div,{className:"glass-card p-8 rounded-2xl text-center space-y-3",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:[(0,a.jsx)("p",{className:"text-5xl",children:"‚ö†Ô∏è"}),(0,a.jsx)("p",{className:"text-red-300 text-base font-bold",children:"Failed to Load Blocks"}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:i})]}):0===e.length?(0,a.jsxs)(j.P.div,{className:"glass-card p-8 rounded-2xl text-center space-y-3",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-5xl",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-300 text-base font-medium",children:"No blocks available"})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-orange-600 scrollbar-track-gray-800",children:e.map((e,t)=>(0,a.jsxs)(j.P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.05*t},className:"glass-card p-4 rounded-xl hover:border-orange-500/50 border border-transparent transition-all duration-300 group relative overflow-hidden min-w-[280px] flex-shrink-0",children:[(0,a.jsx)(j.P.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-orange-500/10 to-orange-500/0 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0}}),(0,a.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(Q.E,{className:"bg-orange-500/20 text-orange-300 border-orange-400/50 text-xs px-2 py-0.5 font-mono",children:["#",e.height]}),(0,a.jsx)("span",{className:"text-[10px] text-gray-500",children:d(e.timestamp)})]}),0===t&&(0,a.jsx)(j.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,a.jsx)(Q.E,{className:"bg-green-500/20 text-green-300 border-green-400/50 text-[10px] px-2 py-0.5",children:"Latest"})})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-orange-500/10 to-purple-500/10 rounded-lg p-3 border border-orange-500/30",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400 text-xs font-semibold",children:"Total Transactions"}),(0,a.jsx)(j.P.span,{className:"text-2xl font-black gradient-text",animate:{textShadow:["0 0 10px rgba(255,120,0,0.5)","0 0 20px rgba(255,120,0,0.8)","0 0 10px rgba(255,120,0,0.5)"]},transition:{duration:2,repeat:1/0},children:e.tx_count.toLocaleString()})]})}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Block Hash:"}),(0,a.jsx)("span",{className:"text-cyan-300 font-mono",children:o(e.hash)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Size:"}),(0,a.jsxs)("span",{className:"text-purple-300 font-semibold",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]})]})]},e.height))}),!s&&!i&&e.length>0&&(0,a.jsx)(j.P.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"text-center pt-3 border-t border-orange-500/20",children:(0,a.jsxs)("p",{className:"text-xs text-gray-400 flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),"Auto-refreshing every 60 seconds"]})})]})})]})}function el(){let{connected:e,mode:t}=(0,Z.Im)();return(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 glass-card border-b border-white/10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(Q.E,{variant:"outline",className:"bg-purple-500/20 text-purple-300 border-purple-400/50 px-3 py-1.5 text-xs font-bold",children:"\uD83D\uDD34 REAL-TIME MODE"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:(0,a.jsx)("span",{children:"Connected to live Bitcoin network"})})]}),(0,a.jsxs)(Q.E,{variant:"outline",className:`${e?"bg-green-500/20 text-green-300 border-green-400/50":"bg-red-500/20 text-red-300 border-red-400/50"} px-3 py-1.5 text-xs font-semibold`,children:[(0,a.jsx)("span",{className:`inline-block w-2 h-2 rounded-full mr-2 ${e?"bg-green-400 animate-pulse":"bg-red-400"}`}),e?"Connected":"Disconnected"]})]})})}function eo({}){let{activeRound:e,connected:t,errorStates:s,loadingStates:n}=(0,Z.Im)(),[i,l]=(0,r.useState)("0m 0s"),[o,d]=(0,r.useState)(null),[c,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(null),[h,f]=(0,r.useState)(!1),b=(0,r.useCallback)(async(e=0)=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),5e3),s=await fetch("/api/mempool?action=recent-blocks",{signal:e.signal,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(clearTimeout(t),!s.ok)throw Error(`HTTP ${s.status}: ${s.statusText}`);let a=await s.json();a.timestamp&&d(1e3*a.timestamp),a.height&&x(a.height),a.tx_count&&m(a.tx_count),g(null),console.log("‚úÖ Block data fetched successfully")}catch(t){if(console.error(`‚ùå Failed to fetch block data (attempt ${e+1}):`,t),e<3){let t=1e3*Math.pow(2,e);console.log(`üîÑ Retrying in ${t}ms...`),setTimeout(()=>b(e+1),t)}else g("Failed to fetch block data. Please check your connection.")}},[]),y=()=>e?e.status.toUpperCase():"WAITING",v=()=>e?"open"===e.status?"bg-green-500/20 text-green-300 border-green-400/50":"closed"===e.status?"bg-yellow-500/20 text-yellow-300 border-yellow-400/50":"finished"===e.status?"bg-purple-500/20 text-purple-300 border-purple-400/50":"bg-gray-500/20 text-gray-300 border-gray-400/50":"bg-gray-500/20 text-gray-300 border-gray-400/50",N=(0,r.useMemo)(()=>y(),[e]),w=(0,r.useMemo)(()=>v(),[e]),D=(0,r.useMemo)(()=>e?.roundNumber?.toString()||"‚Äî",[e?.roundNumber]),k=(0,r.useMemo)(()=>e?.blockNumber||c||875420,[e?.blockNumber,c]),C=(0,r.useMemo)(()=>u||0,[u]);return t?e&&"closed"!==e.status&&"finished"!==e.status?(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-orange-500/30 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-purple-500 to-orange-500 animate-pulse"}),(0,a.jsx)(_.Wu,{className:"py-6 px-6",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.P.span,{animate:{rotate:360*("open"===e.status)},transition:{duration:3,repeat:"open"===e.status?1/0:0,ease:"linear"},className:"text-2xl",children:"\uD83C\uDFAE"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-lg lg:text-xl font-black text-white",children:["Round #",D]}),(0,a.jsx)(Q.E,{variant:"default",className:`${w} px-3 py-0.5 text-xs font-bold`,children:N})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Started by admin"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 w-full lg:w-auto",children:[(0,a.jsx)("div",{className:"glass-card p-3 lg:p-4 rounded-xl flex-1 relative",children:(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("p",{className:"text-[10px] lg:text-xs text-blue-300 font-semibold",children:"\uD83E\uDDF1 Target Block"}),(0,a.jsxs)(j.P.p,{className:"text-xl lg:text-2xl font-black text-blue-400 font-mono",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:["#",k.toLocaleString()]},k),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("p",{className:"text-[9px] lg:text-[10px] text-gray-400",children:["Txs: ",C.toLocaleString()]}),p&&(0,a.jsx)("button",{onClick:()=>{f(!0),b().finally(()=>f(!1))},className:"text-[9px] text-yellow-400 hover:text-yellow-300",disabled:h,children:"\uD83D\uDD04"})]}),p&&(0,a.jsx)("p",{className:"text-[8px] text-red-400 mt-1",children:p})]})}),(0,a.jsx)("div",{className:"glass-card p-3 lg:p-4 rounded-xl flex-1",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-[10px] lg:text-xs text-orange-300 font-semibold mb-1",children:"‚è± Time Left"}),(0,a.jsx)(j.P.p,{className:"text-xl lg:text-2xl font-black text-white font-mono",animate:{textShadow:"open"===e.status?["0 0 10px rgba(251,146,60,0.5)","0 0 20px rgba(251,146,60,0.8)","0 0 10px rgba(251,146,60,0.5)"]:[]},transition:{duration:2,repeat:"open"===e.status?1/0:0},children:i},i),(0,a.jsx)("p",{className:"text-[9px] lg:text-[10px] text-gray-400 mt-1",children:e.duration?`${e.duration}m`:"N/A"})]})})]})]})})]})}):(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:(0,a.jsx)(_.Zp,{className:"glass-card-dark border-gray-500/30 overflow-hidden",children:(0,a.jsx)(_.Wu,{className:"py-8 px-6",children:(0,a.jsxs)(j.P.div,{className:"text-center",animate:{opacity:[.5,1,.5]},transition:{duration:3,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-xl text-gray-400 mb-2",children:"‚è≥"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Waiting for admin to start round..."}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:e?"Round closed - waiting for next round":"No active round yet"})]})})})}):(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:(0,a.jsxs)(_.Zp,{className:"glass-card-dark border-orange-500/30 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-purple-500 to-orange-500 animate-pulse"}),(0,a.jsx)(_.Wu,{className:"py-6 px-6",children:(0,a.jsxs)(j.P.div,{className:"text-center py-8",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"\uD83D\uDD0C Connecting to database..."}),s.connection&&(0,a.jsx)("p",{className:"text-red-400 text-xs mt-2",children:s.connection})]})})]})})}function ed({firstPrize:e="1,000",secondPrize:t="500",currency:s="$SECOND"}){return(0,a.jsx)(j.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},className:"w-full",children:(0,a.jsx)(_.Zp,{className:"glass-card border border-orange-500/30 shadow-3d overflow-hidden",children:(0,a.jsxs)(_.Wu,{className:"p-3 sm:p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-yellow-300 flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-base",children:"\uD83C\uDFC6"}),"Prizes"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#111111]/50 border border-yellow-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83E\uDD47"}),(0,a.jsx)("span",{className:"text-xs font-semibold text-yellow-400",children:"1st"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-sm font-bold text-[#EAEAEA]",children:[e," ",(0,a.jsx)("span",{className:"text-green-400 text-xs",children:s})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#111111]/50 border border-gray-500/30",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83E\uDD48"}),(0,a.jsx)("span",{className:"text-xs font-semibold text-gray-300",children:"2nd"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-sm font-bold text-[#EAEAEA]",children:[t," ",(0,a.jsx)("span",{className:"text-green-400 text-xs",children:s})]})})]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-700/50"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h3",{className:"text-sm font-bold text-orange-300 flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"text-base",children:"\uD83D\uDCDC"}),"Rules"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,a.jsx)("div",{className:"text-lg mb-0.5",children:"\uD83E\uDDE0"}),(0,a.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"Guess tx count"})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,a.jsx)("div",{className:"text-lg mb-0.5",children:"\uD83E\uDD47"}),(0,a.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"Closest wins"})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,a.jsx)("div",{className:"text-lg mb-0.5",children:"\uD83D\uDD22"}),(0,a.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"One guess/player"})]}),(0,a.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,a.jsx)("div",{className:"text-lg mb-0.5",children:"‚è±"}),(0,a.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"Earliest wins ties"})]})]})]}),(0,a.jsx)("div",{className:"text-center pt-1",children:(0,a.jsx)("div",{className:"inline-block px-3 py-1 rounded-full glass-card-dark border border-blue-500/30",children:(0,a.jsxs)("p",{className:"text-[10px] text-blue-300",children:["\uD83D\uDCE1 Data: ",(0,a.jsx)("span",{className:"font-bold text-blue-200",children:"mempool.space"})]})})})]})})})}var ec=s(1203);function ex(){let{trackInteraction:e}=(0,ec.LC)("PerformanceDashboard"),{connected:t,performance:s}=(0,Z.Im)(),[n,i]=(0,r.useState)([]),[l,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(!1),[x,u]=(0,r.useState)(Date.now()),m=async()=>{try{e("fetchPerformanceData");let a=await fetch("/api/analytics?action=performance&period=1h",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")||""}`}});if(a.ok){let e=await a.json(),r=[];e.performance?.clientMetrics?.pageLoadTime?.avg&&r.push({name:"Page Load Time",value:Math.round(e.performance.clientMetrics.pageLoadTime.avg),unit:"ms",timestamp:Date.now(),status:e.performance.clientMetrics.pageLoadTime.avg>3e3?"critical":e.performance.clientMetrics.pageLoadTime.avg>1500?"warning":"good"}),e.performance?.clientMetrics?.apiCallTime?.avg&&r.push({name:"API Response Time",value:Math.round(e.performance.clientMetrics.apiCallTime.avg),unit:"ms",timestamp:Date.now(),status:e.performance.clientMetrics.apiCallTime.avg>1e3?"critical":e.performance.clientMetrics.apiCallTime.avg>500?"warning":"good"}),e.performance?.clientMetrics?.memoryUsage?.avg&&r.push({name:"Memory Usage",value:Math.round(e.performance.clientMetrics.memoryUsage.avg),unit:"MB",timestamp:Date.now(),status:e.performance.clientMetrics.memoryUsage.avg>100?"critical":e.performance.clientMetrics.memoryUsage.avg>50?"warning":"good"}),r.push({name:"Connection Health",value:100*!!t,unit:"%",timestamp:Date.now(),status:t?"good":"critical"}),r.push({name:"Sync Operations",value:s.syncCount,unit:"count",timestamp:Date.now(),status:s.errorCount>5?"warning":"good"}),i(r);let n=[];e.performance?.clientMetrics?.summary?.alerts&&e.performance.clientMetrics.summary.alerts.forEach((e,t)=>{n.push({id:`alert-${Date.now()}-${t}`,type:e.value>3e3?"error":"warning",message:`${e.name}: ${e.value}${e.unit}`,timestamp:Date.now(),metric:e.name})}),s.errorCount>0&&n.push({id:`error-count-${Date.now()}`,type:"warning",message:`${s.errorCount} errors recorded in current session`,timestamp:Date.now()}),t||n.push({id:`connection-${Date.now()}`,type:"error",message:"Database connection lost",timestamp:Date.now()}),o(n.slice(0,5)),u(Date.now())}}catch(t){console.error("Failed to fetch performance data:",t),e("fetchPerformanceDataError",{error:t.message})}},p=e=>{switch(e){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},g=e=>{switch(e){case"error":return"‚ùå";case"warning":return"‚ö†Ô∏è";case"info":return"‚ÑπÔ∏è";default:return"\uD83D\uDCCA"}};return d?(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50 w-96 max-h-96 overflow-hidden",children:(0,a.jsxs)(_.Zp,{className:"shadow-xl border-2",children:[(0,a.jsxs)(_.aR,{className:"pb-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(_.ZB,{className:"text-sm font-medium",children:"Performance Monitor"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(w.$,{onClick:m,size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:"\uD83D\uDD04"}),(0,a.jsx)(w.$,{onClick:()=>{c(!1),e("closePerformanceDashboard")},size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:"‚úï"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(x).toLocaleTimeString()]})]}),(0,a.jsxs)(_.Wu,{className:"space-y-3 max-h-80 overflow-y-auto",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium truncate",children:e.name}),(0,a.jsx)("div",{className:`w-2 h-2 rounded-full ${p(e.status)}`})]}),(0,a.jsxs)("div",{className:"text-lg font-bold",children:[e.value,(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:e.unit})]})]},t))}),l.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-red-600",children:"Alerts"}),l.map(e=>(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 p-2 rounded",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{children:g(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-red-800",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-red-600 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})]})},e.id))]}),(0,a.jsx)("div",{className:"bg-gray-50 p-2 rounded",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-medium",children:"Database Connection"}),(0,a.jsx)(Q.E,{variant:t?"default":"destructive",className:"text-xs",children:t?"Connected":"Disconnected"})]})}),(0,a.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,a.jsx)("div",{className:"text-xs font-medium mb-1",children:"Session Stats"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,a.jsxs)("div",{children:["Syncs: ",s.syncCount]}),(0,a.jsxs)("div",{children:["Errors: ",s.errorCount]}),(0,a.jsxs)("div",{children:["Health: ",s.getConnectionHealth()?"Good":"Poor"]}),(0,a.jsxs)("div",{children:["Last Sync: ",new Date(s.lastSyncTime).toLocaleTimeString()]})]})]})]})]})}):(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 z-50",children:[(0,a.jsx)(w.$,{onClick:()=>{c(!0),e("openPerformanceDashboard")},className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg",size:"sm",children:"\uD83D\uDCCA"}),l.length>0&&(0,a.jsx)(Q.E,{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full px-1 py-0 text-xs",children:l.length})]})}var eu=s(2678);function em(){(0,N.useRouter)();let[e,t]=(0,r.useState)(!0),[s,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[c,x]=(0,r.useState)(null),{activeRound:u,getGuessesForRound:m,connected:p,user:g,prizeConfig:h,loadingStates:f,errorStates:b,performance:y,retryActions:D}=(0,Z.Im)();return(0,r.useMemo)(()=>u?m(u.id).length:0,[u,m]),(0,r.useCallback)(async()=>{let e=0;for(;e<3;)try{console.log(`üîÑ Initializing Farcaster SDK (attempt ${e+1}/3)`),"complete"!==document.readyState&&await new Promise(e=>{"complete"===document.readyState?e():window.addEventListener("load",()=>e(),{once:!0})}),await new Promise(e=>setTimeout(e,100)),await eu.sdk.actions.ready(),console.log("‚úÖ Farcaster SDK initialized successfully"),d(!0),x(null);return}catch(s){let t=++e>=3;if(console.error(`‚ùå Farcaster SDK initialization attempt ${e} failed:`,s),t)x("Failed to initialize Farcaster SDK. Some features may not work properly."),console.error("All Farcaster SDK initialization attempts failed");else{let t=1e3*Math.pow(2,e-1);await new Promise(e=>setTimeout(e,t))}}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{mode:"wait",children:e&&(0,a.jsx)(er,{},"loading")}),!e&&(0,a.jsxs)(j.P.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen relative overflow-hidden",style:{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%)"},children:[(0,a.jsx)(en,{}),(0,a.jsx)(el,{}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/10 to-black/30 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto p-3 sm:p-4 pt-16 sm:pt-20 pb-16 sm:pb-20 space-y-4 sm:space-y-6",children:[(0,a.jsxs)(j.P.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(j.P.h1,{className:"text-3xl lg:text-4xl font-black gradient-text flex items-center gap-3 relative z-50",style:{filter:"none",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",transform:"translateZ(0)"},children:[(0,a.jsx)("span",{className:"text-4xl lg:text-5xl",style:{display:"inline-block",lineHeight:"1",filter:"contrast(1.2) brightness(1.1)",transform:"translateZ(0)",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},children:"\uD83D\uDEE0Ô∏è"}),"Bitcoin Blocks"]}),(0,a.jsxs)("p",{className:"text-orange-300 text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-block w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),"Predicting Bitcoin's Next Block"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.P.div,{animate:{scale:p?[1,1.05,1]:1},transition:{duration:2,repeat:1/0},children:(0,a.jsxs)(Q.E,{variant:"outline",className:`${p?"glass-card text-green-300 border-green-400/50 shadow-lg shadow-green-500/20":"glass-card-dark text-red-300 border-red-400/50"} px-3 py-1.5 text-xs font-semibold`,children:[(0,a.jsx)("span",{className:`inline-block w-2 h-2 rounded-full mr-2 ${p?"bg-green-400 animate-pulse":"bg-red-400"}`}),p?"Connected":"Disconnected"]})}),(0,a.jsx)(J,{})]})]}),(0,a.jsx)(j.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:(0,a.jsxs)(_.Zp,{className:"glass-card border-2 border-yellow-500/50 overflow-hidden relative shadow-3d",children:[(0,a.jsx)(j.P.div,{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/0 via-yellow-500/20 to-yellow-500/0",animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0}}),(0,a.jsxs)(_.Wu,{className:"py-4 sm:py-6 text-center relative z-10",children:[(0,a.jsx)("p",{className:"text-yellow-300 text-xs sm:text-sm font-bold uppercase tracking-wider mb-1",children:"\uD83D\uDCB0 Jackpot"}),(0,a.jsx)(j.P.p,{className:"text-3xl sm:text-5xl font-black gradient-text",animate:{textShadow:["0 0 20px rgba(234,179,8,0.5)","0 0 40px rgba(234,179,8,0.8)","0 0 20px rgba(234,179,8,0.5)"]},transition:{duration:2,repeat:1/0},children:h?`${Number(h.jackpotAmount).toLocaleString()} ${h.currencyType}`:"5,000 $SECOND"})]})]})}),(0,a.jsx)(ed,{firstPrize:h?Number(h.firstPlaceAmount).toLocaleString():"1,000",secondPrize:h?Number(h.secondPlaceAmount).toLocaleString():"500",currency:h?.currencyType||"$SECOND"}),(0,a.jsx)(eo,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,a.jsx)(j.P.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},children:(0,a.jsx)(et,{})}),(0,a.jsx)(j.P.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6},children:(0,a.jsx)(es,{})}),(0,a.jsx)(j.P.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.7},children:(0,a.jsx)(V,{})})]}),(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.75},children:(0,a.jsx)(ea,{})}),(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:(0,a.jsx)(ei,{})}),g&&(0,Z.gD)(g.address)&&(0,a.jsx)(j.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.85},className:"flex justify-center",children:(0,a.jsx)(w.$,{onClick:()=>l(!i),className:"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white font-bold px-6 py-3 transition-all",children:i?"‚ùå Hide Admin Panel":"\uD83D\uDEE0Ô∏è Show Admin Panel"})}),i&&(0,a.jsx)(ee,{})]})]}),(0,a.jsx)(ex,{})]})}n().Component},1997:e=>{"use strict";e.exports=require("punycode")},2632:(e,t,s)=>{"use strict";e.exports=s(7109)},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3136:e=>{"use strict";e.exports=require("node:url")},3148:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(7774),r=s(8586);function n(...e){return(0,r.QP)((0,a.$)(e))}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3939:e=>{"use strict";e.exports=require("@supabase/supabase-js")},4075:e=>{"use strict";e.exports=require("zlib")},4445:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s(2966),r=s(4535),n=s(1572),i=s(8646),l=s(3148);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(n.b,{ref:s,className:(0,l.cn)(o(),e),...t}));d.displayName=n.b.displayName},4573:e=>{"use strict";e.exports=require("node:buffer")},4620:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(2120).registerClientReference)(function(){throw Error("Attempted to call the default export of \"c:\\\\Users\\\\UserBQ\\\\Downloads\\\\mini app\\\\blocks\\\\src\\\\app\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"c:\\Users\\UserBQ\\Downloads\\mini app\\blocks\\src\\app\\page.tsx","default")},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5529:e=>{"use strict";e.exports=require("stream")},5563:(e,t,s)=>{"use strict";s.d(t,{d:()=>r});var a=s(730);function r(){return{toast:({title:e,description:t,variant:s})=>{"destructive"===s?a.oR.error(e,{description:t}):a.oR.success(e,{description:t})}}}},5591:e=>{"use strict";e.exports=require("https")},6589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(8756),r=s(1739),n=s(8483),i=s.n(n),l=s(3100),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4620)),"c:\\Users\\UserBQ\\Downloads\\mini app\\blocks\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2615)),"c:\\Users\\UserBQ\\Downloads\\mini app\\blocks\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2945,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9932,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,3469,23)),"next/dist/client/components/unauthorized-error"]}],c=["c:\\Users\\UserBQ\\Downloads\\mini app\\blocks\\src\\app\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7012:e=>{"use strict";e.exports=require("tls")},7109:(e,t,s)=>{"use strict";var a=s(4535),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,i=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!r(e,s)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),a=n({inst:{value:s,getSnapshot:t}}),r=a[0].inst,c=a[1];return l(function(){r.value=s,r.getSnapshot=t,d(r)&&c({inst:r})},[e,s,t]),i(function(){return d(r)&&c({inst:r}),e(function(){d(r)&&c({inst:r})})},[e]),o(s),s};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},7236:(e,t,s)=>{Promise.resolve().then(s.bind(s,4620))},7598:e=>{"use strict";e.exports=require("node:crypto")},7618:(e,t,s)=>{"use strict";s.d(t,{E:()=>l});var a=s(2966);s(4535);var r=s(8646),n=s(3148);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},8354:e=>{"use strict";e.exports=require("util")},8358:(e,t,s)=>{"use strict";s.d(t,{vQ:()=>a});let a={mode:"supabase",mock:{autoLogin:!0,adminAddress:"fid-250704",initialRound:{prize:"5,000 $SECOND",blockNumber:875420,duration:864e5}},supabase:{url:"https://masgfwpxfytraiwkvbmg.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hc2dmd3B4Znl0cmFpd2t2Ym1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2OTQ5NTYsImV4cCI6MjA3NjI3MDk1Nn0.QAVE2pVMR869KycgzXe2MaQyJTyQb-yZM5zfIbtsMDM",bitcoinApiInterval:1e4,mempoolApiUrl:"https://mempool.space/api",realtime:{eventsPerSecond:10}}}},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9155:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(2966),r=s(4535),n=s(5958),i=s(8646),l=s(3148);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 button-3d",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},d)=>{let c=r?n.DX:"button";return(0,a.jsx)(c,{className:(0,l.cn)(o({variant:t,size:s,className:e})),ref:d,...i})});d.displayName="Button"},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")},9972:(e,t,s)=>{Promise.resolve().then(s.bind(s,1826))}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[859,536,269,678,299,353],()=>s(6589));module.exports=a})();