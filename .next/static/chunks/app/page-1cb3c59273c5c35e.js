(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514,974],{21486:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(46814);a(42094);var r=a(12092),n=a(44682);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:a}),t),...r})}},44682:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(76554),r=a(57038);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},46695:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=a(46814),r=a(42094),n=a(44682);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},51244:(e,t,a)=>{"use strict";a.d(t,{vQ:()=>s});let s={mode:"supabase",mock:{autoLogin:!0,adminAddress:"fid-250704",initialRound:{prize:"5,000 $SECOND",blockNumber:875420,duration:864e5}},supabase:{url:"https://masgfwpxfytraiwkvbmg.supabase.co",anonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hc2dmd3B4Znl0cmFpd2t2Ym1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2OTQ5NTYsImV4cCI6MjA3NjI3MDk1Nn0.QAVE2pVMR869KycgzXe2MaQyJTyQb-yZM5zfIbtsMDM",bitcoinApiInterval:1e4,mempoolApiUrl:"https://mempool.space/api",realtime:{eventsPerSecond:10}}}},57869:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var s=a(46814),r=a(42094),n=a(26797),i=a(12092),l=a(44682);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 button-3d",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:c=!1,...d}=e,x=c?n.DX:"button";return(0,s.jsx)(x,{className:(0,l.cn)(o({variant:r,size:i,className:a})),ref:t,...d})});c.displayName="Button"},57883:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(46814),r=a(42094),n=a(44682);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},60537:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var s=a(24680);function r(){return{toast:e=>{let{title:t,description:a,variant:r}=e;"destructive"===r?s.oR.error(t,{description:a}):s.oR.success(t,{description:a})}}}},62332:(e,t,a)=>{Promise.resolve().then(a.bind(a,84581))},63514:()=>{},64065:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var s=a(46814),r=a(42094),n=a(51348),i=a(12092),l=a(44682);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),a),...r})});c.displayName=n.b.displayName},84581:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>L});var s=a(46814),r=a(42094),n=a(50145),i=a(61915),l=a(82900),o=a(57869),c=a(113),d=a(44682);let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(c.bL,{ref:t,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});x.displayName=c.bL.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(c._V,{ref:t,className:(0,d.cn)("aspect-square h-full w-full",a),...r})});m.displayName=c._V.displayName;let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(c.H4,{ref:t,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});u.displayName=c.H4.displayName;var p=a(72586),h=a(52392);function g(){var e;let{user:t,setUser:a}=(0,p.Im)(),[n,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),g=async()=>{try{l(!0);let e=await h.fD.initializeAuth();e?(a(e),console.log("✅ User authenticated successfully:",e)):console.error("❌ Failed to authenticate user")}catch(e){console.error("Failed to connect wallet:",e)}finally{l(!1)}},b=async()=>{try{l(!0),await h.fD.signOut(),a(null),console.log("✅ User disconnected successfully")}catch(e){console.error("Failed to disconnect:",e)}finally{l(!1)}};return n?(0,s.jsx)(o.$,{disabled:!0,className:"animate-pulse",children:"Connecting..."}):t?(0,s.jsxs)(i.P.div,{className:"flex items-center gap-3 px-4 py-2 rounded-2xl bg-gradient-to-r from-orange-500/20 to-purple-500/20 backdrop-blur-xl border border-white/20 shadow-lg",onHoverStart:()=>d(!0),onHoverEnd:()=>d(!1),whileHover:{scale:1.02,boxShadow:"0 0 25px rgba(255, 120, 0, 0.3)"},transition:{duration:.2},children:[(0,s.jsx)(i.P.div,{animate:c?{rotate:360}:{rotate:0},transition:{duration:.5},children:(0,s.jsxs)(x,{className:"h-10 w-10 ring-2 ring-orange-400 ring-offset-2 ring-offset-transparent",children:[(0,s.jsx)(m,{src:t.pfpUrl,alt:t.username}),(0,s.jsx)(u,{className:"bg-gradient-to-br from-orange-500 to-purple-600 text-white",children:null==(e=t.username[0])?void 0:e.toUpperCase()})]})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-white",children:["@",t.username]}),(0,s.jsx)("span",{className:"text-xs text-orange-300 font-mono",children:t.address.startsWith("fid-")?"FID: ".concat(t.address.replace("fid-","")):"".concat(t.address.slice(0,6),"...").concat(t.address.slice(-4))})]}),(0,s.jsx)(o.$,{onClick:b,variant:"ghost",size:"sm",className:"text-xs text-red-300 hover:text-red-400 hover:bg-red-500/10",children:"Disconnect"})]}):(0,s.jsx)(i.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,s.jsx)(o.$,{onClick:g,className:"bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700 text-white font-bold shadow-lg",children:"\uD83D\uDD17 Connect"})})}var b=a(46695),f=a(21486),y=a(57883),v=a(60537);function j(e){let{}=e,{user:t,activeRound:a,chatMessages:l,addChatMessage:c}=(0,p.Im)(),{toast:d}=(0,v.d)(),[h,g]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),w=(0,r.useRef)(null),D=()=>{var e;null==(e=w.current)||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{D()},[l]);let k=[...l].sort((e,t)=>t.timestamp-e.timestamp).slice(0,100);return(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-cyan-500/30 h-full flex flex-col shadow-3d",children:[(0,s.jsx)(b.aR,{className:"pb-3",children:(0,s.jsxs)(b.ZB,{className:"flex items-center gap-2 text-white text-lg",children:[(0,s.jsx)(i.P.span,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:"\uD83D\uDCAC"}),"Live Chat",(0,s.jsxs)(f.E,{variant:"outline",className:"ml-auto bg-cyan-500/20 text-cyan-300 border-cyan-400/50 text-xs",children:[k.length," messages"]})]})}),(0,s.jsxs)(b.Wu,{className:"flex-1 overflow-hidden flex flex-col",children:[t&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim()){if(h.length>200)return void d({title:"⚠️ Message Too Long",description:"Maximum 200 characters allowed",variant:"destructive"});try{N(!0);let e={id:"chat-".concat(Date.now(),"-").concat(t.address),roundId:(null==a?void 0:a.id)||"global",address:t.address,username:t.username,message:h.trim(),pfpUrl:t.pfpUrl,timestamp:Date.now(),type:"chat"};c(e),g(""),d({title:"✅ Message Sent",description:"Your message is now visible to all players"})}catch(e){d({title:"❌ Send Failed",description:"Could not send message",variant:"destructive"})}finally{N(!1)}}},className:"flex gap-2",children:[(0,s.jsx)(y.p,{type:"text",placeholder:"Type a message...",value:h,onChange:e=>g(e.target.value),disabled:j,maxLength:200,className:"h-10 text-sm bg-gray-800/50 border-cyan-500/50 text-white placeholder:text-gray-500"}),(0,s.jsx)(o.$,{type:"submit",disabled:!h.trim()||j,className:"h-10 px-4 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold text-sm",children:j?"⚙️":"\uD83D\uDCE4"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-hidden",children:0===k.length?(0,s.jsxs)(i.P.div,{className:"flex flex-col items-center justify-center h-full",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-4xl mb-4",children:"\uD83D\uDCAC"}),(0,s.jsx)("p",{className:"text-gray-400 text-base font-medium",children:"Global Chat Active"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:a?"Send a message to get started!":"Chat is open - round will start soon"})]}):(0,s.jsxs)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-cyan-600 scrollbar-track-gray-800",children:[(0,s.jsx)(n.N,{mode:"popLayout",children:k.map((e,t)=>{var a;return(0,s.jsxs)(i.P.div,{initial:{opacity:0,x:-30,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:30,scale:.9},transition:{delay:.05*t},className:"flex items-start gap-3 p-3 rounded-xl backdrop-blur-xl border ".concat("winner"===e.type?"glass-card border-yellow-500/50 bg-gradient-to-r from-yellow-500/20 to-orange-500/20":"system"===e.type?"glass-card border-purple-400/50 bg-purple-500/10":"guess"===e.type?"glass-card border-orange-500/50 bg-gradient-to-r from-orange-500/10 to-purple-500/10":"chat"===e.type?"glass-card border-cyan-500/30 bg-cyan-500/5":"glass-card-dark border-gray-500/30"),children:[(0,s.jsxs)(x,{className:"h-10 w-10 ring-2 ring-cyan-400/50",children:[(0,s.jsx)(m,{src:e.pfpUrl,alt:e.username}),(0,s.jsx)(u,{className:"bg-gradient-to-br from-cyan-500 to-blue-500 text-white text-xs",children:null==(a=e.username[0])?void 0:a.toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsxs)("span",{className:"font-bold text-sm ".concat("winner"===e.type?"text-yellow-300":"text-white"),children:["@",e.username]}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-500 font-mono",children:[e.address.slice(0,6),"...",e.address.slice(-4)]}),"winner"===e.type&&(0,s.jsx)(f.E,{className:"bg-yellow-500/20 text-yellow-300 border-yellow-400/50 text-xs",children:"\uD83D\uDC51 Winner"}),"guess"===e.type&&(0,s.jsx)(f.E,{className:"bg-orange-500/20 text-orange-300 border-orange-400/50 text-xs",children:"\uD83C\uDFAF Guess"})]}),(0,s.jsx)("p",{className:"text-sm ".concat("winner"===e.type?"text-yellow-200 font-semibold":"system"===e.type?"text-purple-200":"guess"===e.type?"text-orange-200 font-semibold":"text-gray-300"),children:e.message}),(0,s.jsx)("span",{className:"text-[10px] text-gray-500 mt-1 block",children:new Date(e.timestamp).toLocaleTimeString()})]})]},e.id)})}),(0,s.jsx)("div",{ref:w})]})})]})]})}var N=a(64065),w=a(51244);function D(e){let{walletAddress:t}=e,[a,n]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),x=async()=>{if(!i){l(!0),d(null);try{let e=await fetch("/api/base-balance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:t})});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let a=await e.json();if(!a.success)throw Error(a.error||"Failed to fetch balances");n(a.balances)}catch(e){console.error("Error fetching balances:",e),d(e instanceof Error?e.message:"Failed to fetch balances")}finally{l(!1)}}};return((0,r.useEffect)(()=>{t&&x()},[t]),c)?(0,s.jsx)(b.Zp,{className:"glass-card-dark p-4 border border-red-500/30",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-red-400",children:["❌ ",c]}),(0,s.jsx)(o.$,{onClick:x,variant:"outline",size:"sm",className:"text-xs",children:"\uD83D\uDD04 Retry"})]})}):i||!a?(0,s.jsx)(b.Zp,{className:"glass-card-dark p-4 border border-blue-500/30",children:(0,s.jsx)("p",{className:"text-sm text-blue-300 text-center",children:"⏳ Loading balances..."})}):(0,s.jsx)(b.Zp,{className:"glass-card-dark p-4 border border-green-500/30",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-green-300",children:"\uD83D\uDCB0 Wallet Balances (Base Chain)"}),(0,s.jsx)(o.$,{onClick:x,variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-gray-400 hover:text-white",children:"\uD83D\uDD04"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{className:"glass-card p-3 rounded-lg border border-gray-600/30",children:[(0,s.jsx)("div",{className:"text-[10px] text-gray-400 mb-1",children:"ETH"}),(0,s.jsx)("div",{className:"text-sm font-bold text-white",children:a.eth})]}),(0,s.jsxs)("div",{className:"glass-card p-3 rounded-lg border border-gray-600/30",children:[(0,s.jsx)("div",{className:"text-[10px] text-gray-400 mb-1",children:"USDC"}),(0,s.jsx)("div",{className:"text-sm font-bold text-white",children:a.usdc})]}),(0,s.jsxs)("div",{className:"glass-card p-3 rounded-lg border border-gray-600/30",children:[(0,s.jsx)("div",{className:"text-[10px] text-gray-400 mb-1",children:"$SECONDS"}),(0,s.jsx)("div",{className:"text-sm font-bold text-white",children:a.seconds})]})]}),(0,s.jsxs)("p",{className:"text-[9px] text-gray-500 text-center mt-2",children:["\uD83D\uDCCD Address: ",t.startsWith("fid-")?"FID: ".concat(t.replace("fid-","")):"".concat(t.slice(0,6),"...").concat(t.slice(-4))]})]})})}function k(){let{user:e,createRound:t,endRound:a,updateRoundResult:n,activeRound:l,rounds:c,getGuessesForRound:d,connected:x,client:m,prizeConfig:u}=(0,p.Im)(),{toast:h}=(0,v.d)(),[g,j]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[S,P]=(0,r.useState)(!1),[E,M]=(0,r.useState)(""),[A,T]=(0,r.useState)(""),[F,I]=(0,r.useState)("10"),[R,B]=(0,r.useState)(""),[z,L]=(0,r.useState)(""),[W,O]=(0,r.useState)(""),[Z,U]=(0,r.useState)("");if((0,r.useEffect)(()=>{u?(B(String(u.jackpotAmount)),L(String(u.firstPlaceAmount)),O(String(u.secondPlaceAmount)),U(u.currencyType)):(B("5000"),L("1000"),O("500"),U("$SECOND"))},[u]),!e||!(0,p.gD)(e.address))return(0,s.jsx)(s.Fragment,{});let J=async()=>{if(!E)return void h({title:"⚠️ Missing Round Number",description:"Please enter a round number",variant:"destructive"});if(!A)return void h({title:"⚠️ Missing Block Number",description:"Please enter a target block number",variant:"destructive"});if(!F)return void h({title:"⚠️ Missing Duration",description:"Please enter round duration in minutes",variant:"destructive"});let e=parseInt(E);if(isNaN(e)||e<=0)return void h({title:"⚠️ Invalid Round Number",description:"Please enter a valid positive round number",variant:"destructive"});let a=parseInt(A);if(isNaN(a)||a<=0)return void h({title:"⚠️ Invalid Block Number",description:"Please enter a valid positive block number",variant:"destructive"});let s=parseInt(F);if(isNaN(s)||s<=0)return void h({title:"⚠️ Invalid Duration",description:"Please enter a valid positive duration in minutes",variant:"destructive"});let r=Date.now(),n=r+60*s*1e3,i="".concat(R," ").concat(Z);try{j(!0),await t(e,r,n,i,a,s);let l="".concat(R," ").concat(Z),o="\uD83D\uDD14 Round #".concat(e," Started!\n\nGuess how many transactions will be in the next Bitcoin block ⛏️\n\n\uD83D\uDCB0 Jackpot: ").concat(l,"\n\uD83C\uDFAF Target Block: #").concat(a,"\n⏱ Duration: ").concat(s," minutes\n\n#BitcoinBlocks");await Q(o),h({title:"✅ Round Started",description:"Round #".concat(e," - Block #").concat(a," - ").concat(s," min")}),M(""),T(""),I("10"),"mock"!==w.vQ.mode&&a&&_(a)}catch(e){h({title:"❌ Failed",description:e instanceof Error?e.message:"Failed to start round",variant:"destructive"})}finally{j(!1)}},$=async()=>{if(!l)return void h({title:"⚠️ No Active Round",description:"There is no round to end",variant:"destructive"});try{j(!0),await a(l.id)?h({title:"✅ Round Ended",description:"Submissions are now locked - round in wait state"}):h({title:"❌ Error",description:"Failed to end round",variant:"destructive"})}catch(e){h({title:"❌ Error",description:e instanceof Error?e.message:"Failed to end round",variant:"destructive"})}finally{j(!1)}},H=async()=>{let e=c.find(e=>"closed"===e.status);if(!e)return void h({title:"⚠️ No Closed Round",description:"End a round first before posting results",variant:"destructive"});if(!e.blockNumber)return void h({title:"⚠️ No Block Number",description:"Round does not have a target block",variant:"destructive"});let t=d(e.id);if(0===t.length)return void h({title:"⚠️ No Predictions",description:"Round #".concat(e.roundNumber||e.id," has no player predictions. Cannot calculate winners."),variant:"destructive"});try{if(j(!0),"mock"===w.vQ.mode){let a=Math.floor(1e3*Math.random())+2500,s="0000000000000000000".concat(Math.random().toString(36).substring(2,15)),r=[...t].sort((e,t)=>{let s=Math.abs(e.guess-a),r=Math.abs(t.guess-a);return s!==r?s-r:e.submittedAt-t.submittedAt}),i=r[0],l=r[1];await n(e.id,a,s,i.address);let o="".concat(R," ").concat(Z),c="\uD83D\uDCCA Block #".concat(e.blockNumber," had ").concat(a.toLocaleString()," transactions.\n\n\uD83E\uDD47 Winner: @").concat(i.username,"\n\uD83E\uDD48 Runner-Up: ").concat(l?"@".concat(l.username):"N/A","\n\n\uD83D\uDCB0 Jackpot is now: ").concat(o,"\n\n#BitcoinBlocks");console.log("[MOCK MODE] Farcaster announcement:",c),await Q(c),h({title:"\uD83C\uDF89 Results Posted! (Mock)",description:"Winner: @".concat(i.username," - ").concat(a," tx simulated")});return}let a=await fetch("/api/mempool?action=block-at-time&timestamp=".concat(Math.floor(e.endTime/1e3)));if(!a.ok)throw Error("Block #".concat(e.blockNumber," not found yet. Try again later."));let s=await a.json(),r=s.txCount,i=s.blockHash,l=d(e.id);if(0===t.length)throw Error("No predictions in this round");let o=[...l].sort((e,t)=>{let a=Math.abs(e.guess-r),s=Math.abs(t.guess-r);return a!==s?a-s:e.submittedAt-t.submittedAt}),c=o[0],x=o[1];await n(e.id,r,i,c.address);let m="".concat(R," ").concat(Z),u="\uD83D\uDCCA Block #".concat(e.blockNumber," had ").concat(r.toLocaleString()," transactions.\n\n\uD83E\uDD47 Winner: @").concat(c.username,"\n\uD83E\uDD48 Runner-Up: ").concat(x?"@".concat(x.username):"N/A","\n\n\uD83D\uDCB0 Jackpot is now: ").concat(m,"\n\n#BitcoinBlocks");await Q(u),h({title:"\uD83C\uDF89 Results Posted!",description:"Winner: @".concat(c.username," - announced on Farcaster")})}catch(e){h({title:"❌ Failed",description:e instanceof Error?e.message:"Failed to post results",variant:"destructive"})}finally{j(!1)}},Q=async t=>{if(e&&(0,p.gD)(e.address))try{let a=await fetch("/api/farcaster-announce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,address:e.address})}),s=await a.json();if(!s.success)throw Error(s.error||"Failed to announce")}catch(e){console.error("Announcement error:",e)}},V=async()=>{if(!m||!x)return void h({title:"⚠️ Not Connected",description:"Please wait for database connection",variant:"destructive"});let e=parseFloat(R.replace(/,/g,"")),t=parseFloat(z.replace(/,/g,"")),a=parseFloat(W.replace(/,/g,""));if(isNaN(e)||e<=0)return void h({title:"⚠️ Invalid Jackpot Amount",description:"Please enter a valid positive number",variant:"destructive"});if(isNaN(t)||t<=0)return void h({title:"⚠️ Invalid 1st Place Prize",description:"Please enter a valid positive number",variant:"destructive"});if(isNaN(a)||a<=0)return void h({title:"⚠️ Invalid 2nd Place Prize",description:"Please enter a valid positive number",variant:"destructive"});if(!Z||""===Z.trim())return void h({title:"⚠️ Missing Currency",description:"Please enter a currency type",variant:"destructive"});try{if(j(!0),!await m.updatePrizeConfiguration({jackpotAmount:R,firstPlaceAmount:z,secondPlaceAmount:W,currencyType:Z.trim(),tokenContractAddress:""}))throw Error("Failed to save prize configuration");h({title:"✅ Prize Config Saved",description:"Jackpot: ".concat(R," ").concat(Z,", 1st: ").concat(z,", 2nd: ").concat(W," ").concat(Z)})}catch(e){h({title:"❌ Failed to Save",description:e instanceof Error?e.message:"Failed to save prize config",variant:"destructive"})}finally{j(!1)}},_=async e=>{if("mock"===w.vQ.mode)return;C(!0),P(!1);let t=async()=>{try{let t=await fetch("/api/mempool?action=recent-blocks");if(t.ok&&(await t.json()).some(t=>t.height===e))return console.log("✅ Block #".concat(e," is now available on mempool.space!")),!0;return!1}catch(t){return console.log("⏳ Block #".concat(e," not yet available...")),!1}},a=setInterval(async()=>{if(!l||"open"!==l.status){clearInterval(a),C(!1);return}await t()&&(P(!0),C(!1),clearInterval(a),l&&"open"===l.status&&(h({title:"\uD83C\uDFAF Target Block Found!",description:"Block #".concat(e," is available. Auto-closing round...")}),setTimeout(async()=>{try{await $(),h({title:"✅ Round Auto-Closed",description:"Round closed automatically. You can now post results."})}catch(e){console.error("Failed to auto-close round:",e)}},2e3)))},3e4);await t()&&(P(!0),C(!1),clearInterval(a))};return(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},children:(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-2 border-yellow-500/50 shadow-2xl shadow-yellow-500/20",children:[(0,s.jsx)(b.aR,{className:"pb-3 border-b border-yellow-500/30",children:(0,s.jsxs)(b.ZB,{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i.P.span,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},className:"text-3xl",children:"\uD83D\uDEE0️"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-black gradient-text",children:"Admin Panel"}),(0,s.jsx)("div",{className:"text-[10px] text-yellow-300 font-normal",children:"Manage rounds & configure prizes"})]})]}),(0,s.jsx)(f.E,{variant:"outline",className:"".concat("mock"===w.vQ.mode?"bg-purple-500/20 text-purple-300 border-purple-400/50":"bg-red-500/20 text-red-300 border-red-400/50"," text-xs px-3 py-1"),children:"mock"===w.vQ.mode?"\uD83E\uDDEA MOCK MODE":"\uD83D\uDD34 REAL-TIME"})]})}),(0,s.jsxs)(b.Wu,{className:"pt-6 space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass-card p-6 rounded-2xl space-y-4 border border-green-500/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDE80"}),(0,s.jsx)("h3",{className:"text-base font-bold text-white",children:"Start New Round"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Opens new round for guesses & auto-posts to Farcaster"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(N.J,{className:"text-gray-300 text-sm font-bold",children:["\uD83D\uDD22 Round Number ",(0,s.jsx)("span",{className:"text-gray-500 font-normal text-xs",children:"(sequential: 1, 2, 3...)"})]}),(0,s.jsx)(y.p,{type:"number",placeholder:"Enter: 1, 2, 3, 4, 5... (NOT block number!)",value:E,onChange:e=>M(e.target.value),disabled:g||!x,className:"bg-gray-800/50 border-gray-600/50 text-white h-12 placeholder:text-gray-500"}),(0,s.jsx)("p",{className:"text-[10px] text-green-400",children:"✅ Example: Round 1, Round 2, Round 3"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(N.J,{className:"text-gray-300 text-sm font-bold",children:["\uD83E\uDDF1 Target Block Number ",(0,s.jsx)("span",{className:"text-gray-500 font-normal text-xs",children:"(from mempool.space)"})]}),(0,s.jsx)(y.p,{type:"number",placeholder:"Enter: 919185, 875420... (Bitcoin block height)",value:A,onChange:e=>T(e.target.value),disabled:g||!x,className:"bg-gray-800/50 border-gray-600/50 text-white h-12 placeholder:text-gray-500"}),(0,s.jsx)("p",{className:"text-[10px] text-cyan-400",children:"✅ Example: Block #919185 (6-digit number)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(N.J,{className:"text-gray-300 text-sm font-bold",children:["⏱ Round Duration ",(0,s.jsx)("span",{className:"text-gray-500 font-normal text-xs",children:"(in minutes)"})]}),(0,s.jsx)(y.p,{type:"number",placeholder:"e.g., 10, 15, 30 minutes",value:F,onChange:e=>I(e.target.value),disabled:g||!x,className:"bg-gray-800/50 border-gray-600/50 text-white h-12 placeholder:text-gray-500"}),(0,s.jsx)("p",{className:"text-[10px] text-orange-400",children:"✅ Default: 10 minutes"})]})]}),(0,s.jsx)(o.$,{onClick:J,disabled:g||!x,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold h-12",children:g?"⚙️ Starting...":"\uD83D\uDD14 Start Round & Announce"})]}),(0,s.jsxs)("div",{className:"glass-card p-6 rounded-2xl space-y-4 border border-purple-500/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAE"}),(0,s.jsx)("h3",{className:"text-base font-bold text-white",children:"Manage Round"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"mock"===w.vQ.mode?"End round, simulate & post results":"End round or fetch results from mempool.space (auto-closes when target block available)"}),l?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"glass-card-dark p-3 rounded-lg border border-gray-600/30",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Round #:"}),(0,s.jsx)("span",{className:"text-orange-400 font-bold",children:l.roundNumber||"N/A"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Target Block:"}),(0,s.jsxs)("span",{className:"text-cyan-400 font-bold",children:["#",l.blockNumber||"N/A"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Total Guesses:"}),(0,s.jsx)("span",{className:"text-green-400 font-bold",children:d(l.id).length})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,s.jsx)("span",{className:"font-bold ".concat("open"===l.status?"text-green-400":"closed"===l.status?"text-yellow-400":"text-purple-400"),children:l.status.toUpperCase()})]})]}),k&&"mock"!==w.vQ.mode&&(0,s.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-blue-500/30",children:(0,s.jsxs)("p",{className:"text-xs text-blue-300 text-center",children:["\uD83D\uDD0D Checking mempool.space for Block #",l.blockNumber,"..."]})}),S&&"mock"!==w.vQ.mode&&(0,s.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-green-500/30",children:(0,s.jsxs)("p",{className:"text-xs text-green-300 text-center",children:["✅ Block #",l.blockNumber," found on mempool.space!"]})})]}):(0,s.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-gray-600/30",children:(0,s.jsx)("p",{className:"text-xs text-gray-400 text-center py-2",children:"⚠️ No active round"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(o.$,{onClick:$,variant:"destructive",disabled:g||!x||!l||"open"!==l.status,className:"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 font-bold h-12 disabled:opacity-50 disabled:cursor-not-allowed",children:[g?"⚙️":"\uD83D\uDD12",(0,s.jsx)("span",{className:"ml-1 text-xs",children:g?"Ending...":"End Round"})]}),(0,s.jsxs)(o.$,{onClick:H,disabled:g||!x||!c.find(e=>"closed"===e.status),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold h-12 disabled:opacity-50 disabled:cursor-not-allowed",children:[g?"⚙️":"\uD83D\uDCE1",(0,s.jsx)("span",{className:"ml-1 text-xs",children:g?"mock"===w.vQ.mode?"Simulating...":"Fetching...":"Post Results"})]})]}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500 text-center",children:l||c.find(e=>"closed"===e.status)?(null==l?void 0:l.status)==="open"?"End round to enable posting results":c.find(e=>"closed"===e.status)?"Ready to post results":"Results already posted":"Create a round first"})]}),(0,s.jsxs)("div",{className:"glass-card p-6 rounded-2xl space-y-4 border border-blue-500/30 lg:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"\uD83D\uDCB0"}),(0,s.jsx)("h3",{className:"text-base font-bold text-white",children:"Set Prizes / Currency"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{className:"text-gray-300 text-sm",children:"Jackpot Amount"}),(0,s.jsx)(y.p,{type:"text",placeholder:"5000 (enter numbers only)",value:R,onChange:e=>B(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"}),(0,s.jsx)("p",{className:"text-[10px] text-gray-400",children:"Enter amount without commas or currency symbols"})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{className:"text-gray-300 text-sm",children:"1st Place Prize"}),(0,s.jsx)(y.p,{type:"text",placeholder:"1000",value:z,onChange:e=>L(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{className:"text-gray-300 text-sm",children:"2nd Place Prize"}),(0,s.jsx)(y.p,{type:"text",placeholder:"500",value:W,onChange:e=>O(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{className:"text-gray-300 text-sm",children:"Prize Currency"}),(0,s.jsx)(y.p,{type:"text",placeholder:"$SECOND, USDC, ETH",value:Z,onChange:e=>U(e.target.value),className:"bg-gray-800/50 border-gray-600/50 text-white"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{className:"text-gray-300 text-sm font-bold",children:"\uD83D\uDCB3 Admin Wallet Balances"}),(0,s.jsx)(D,{walletAddress:e.address}),(0,s.jsx)("p",{className:"text-[10px] text-gray-500 text-center",children:"\uD83D\uDCCD Base Chain  | \uD83D\uDCB0 Available for rewards: ETH, USDC, $SECONDS"})]}),(0,s.jsx)(o.$,{onClick:V,disabled:g||!x,className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white font-bold h-12",children:g?"⚙️ Saving...":"\uD83D\uDCBE Save Prize Configuration"}),(0,s.jsx)("div",{className:"glass-card-dark p-3 rounded-lg border border-blue-500/30",children:(0,s.jsx)("p",{className:"text-xs text-blue-300",children:"\uD83D\uDCA1 Save your prize configuration to database. These values will be used when creating new rounds."})})]})]}),(0,s.jsx)("div",{className:"glass-card-dark p-4 rounded-xl border border-cyan-500/30",children:(0,s.jsxs)("p",{className:"text-sm text-cyan-300",children:[(0,s.jsx)("span",{className:"font-bold",children:"ℹ️ Auto-Announcement:"})," Starting rounds and posting results will automatically announce on Farcaster with formatted messages.","mock"===w.vQ.mode&&(0,s.jsx)("span",{className:"text-purple-300 ml-2",children:"(Mock mode: announcements logged to console)"})]})})]})]})})}function C(){let{user:e,activeRound:t,submitGuess:a,hasUserGuessed:n,connected:l,loadingStates:c,errorStates:d,optimisticActions:x}=(0,p.Im)(),{toast:m}=(0,v.d)(),[u,h]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[D,k]=(0,r.useState)(null),{getGuessesForRound:C}=(0,p.Im)(),S=(0,r.useMemo)(()=>t&&e?C(t.id).filter(t=>t.address.toLowerCase()===e.address.toLowerCase()):[],[t,e,C]),P=(0,r.useMemo)(()=>(null==t?void 0:t.status)!=="open",[null==t?void 0:t.status]),E=(0,r.useMemo)(()=>!!e&&!!t&&n(t.id,e.address),[e,t,n]),M=(0,r.useCallback)(e=>{if(!e.trim())return{isValid:!1,error:null};let t=parseInt(e,10);return isNaN(t)?{isValid:!1,error:"Must be a valid number"}:t<1||t>2e4?{isValid:!1,error:"Must be between 1 and 20,000"}:e.includes(".")||e.includes(",")?{isValid:!1,error:"No decimals allowed"}:{isValid:!0,error:null}},[]);(0,r.useEffect)(()=>{if(!u)return void k(null);w(!0);let e=setTimeout(()=>{let{isValid:e,error:t}=M(u);k(t),w(!1)},300);return()=>clearTimeout(e)},[u,M]);let A=(0,r.useCallback)(e=>{let t=e.target.value;(""===t||/^\d+$/.test(t))&&h(t)},[]),T=async s=>{if(s.preventDefault(),!e)return void m({title:"\uD83D\uDD10 Authentication Required",description:"Please sign in with Farcaster first",variant:"destructive"});if(!t)return void m({title:"⚠️ No Active Round",description:"Wait for a round to start",variant:"destructive"});if(P)return void m({title:"❌ Too late! Round is locked.",description:"Submissions are closed for this round",variant:"destructive"});let{isValid:r,error:n}=M(u);if(!r||n)return void m({title:"⚠️ Invalid Input",description:n||"Please enter a valid number between 1 and 20,000",variant:"destructive"});if(E)return void m({title:"❌ Already Submitted",description:"One guess per round. Submit before the block is mined.",variant:"destructive"});let i=parseInt(u,10);try{f(!0),await a(t.id,e.address,e.username,i,e.pfpUrl)?(m({title:"✅ Guess Submitted!",description:"Your prediction: ".concat(i.toLocaleString()," transactions")}),h(""),k(null)):m({title:"❌ Submission Failed",description:"Could not submit prediction. Please try again.",variant:"destructive"})}catch(e){m({title:"⚠️ Error",description:e instanceof Error?e.message:"Failed to submit prediction",variant:"destructive"})}finally{f(!1)}},F=(0,r.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T(e))},[T]);return(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-orange-500/30 h-full shadow-3d",children:[(0,s.jsx)(b.aR,{className:"pb-3",children:(0,s.jsxs)(b.ZB,{className:"flex items-center gap-2 text-white text-lg",children:[(0,s.jsx)(i.P.span,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:"\uD83D\uDD22"}),"Submit Your Guess"]})}),(0,s.jsxs)(b.Wu,{className:"space-y-4",children:[(0,s.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.J,{className:"text-gray-300 text-sm font-semibold",children:"\uD83C\uDFAF Your Prediction"}),(0,s.jsx)(y.p,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:e?t?"Enter tx count (1-20,000)":"Waiting for round...":"Sign in to predict...",value:u,onChange:A,onKeyDown:F,disabled:g||P||!l||!e||!t||E,required:!0,className:"h-14 text-lg font-bold text-center bg-gray-800/50 border-2 transition-all rounded-xl ".concat(D?"border-red-500/50 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-orange-500/50 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/50"," text-white placeholder:text-gray-500")}),D&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-400 text-xs mt-1 flex items-center gap-1",children:[(0,s.jsx)("span",{children:"⚠️"}),(0,s.jsx)("span",{children:D})]})]}),l?e?t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.$,{type:"submit",className:"w-full h-12 text-base font-bold bg-gradient-to-r from-orange-500 to-purple-600 hover:from-orange-600 hover:to-purple-700 text-white shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",disabled:g||P||!l||E||j||!!D,children:g?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.P.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:"⚙️"}),"Submitting..."]}):E?"✅ Already Submitted":P?"\uD83D\uDD12 Round Locked":l?j?"⏳ Validating...":"\uD83D\uDE80 Submit Prediction":"\uD83D\uDD0C Connecting..."}),P&&(0,s.jsx)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass-card p-3 rounded-lg border border-red-500/30 bg-red-500/10",children:(0,s.jsx)("p",{className:"text-sm text-red-300 text-center font-semibold",children:"❌ Round Locked - Submissions Closed"})}),(0,s.jsx)("div",{className:"glass-card p-3 rounded-lg border border-blue-500/30 bg-blue-500/5",children:(0,s.jsx)("p",{className:"text-xs text-blue-300 text-center",children:"\uD83D\uDCA1 Your prediction will be saved below"})})]}):(0,s.jsxs)(i.P.div,{className:"glass-card p-4 rounded-xl text-center border border-yellow-500/30",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-2xl mb-2",children:"⏳"}),(0,s.jsx)("p",{className:"text-yellow-300 text-sm font-medium",children:"Waiting for next round to start..."}),(0,s.jsx)("p",{className:"text-yellow-400 text-xs mt-2",children:"\uD83D\uDCA1 Admin: Create a round in the Admin Panel below"})]}):(0,s.jsxs)(i.P.div,{className:"glass-card p-4 rounded-xl text-center border border-gray-500/30",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-2xl mb-2",children:"\uD83D\uDD12"}),(0,s.jsx)("p",{className:"text-gray-300 text-sm font-medium",children:"Sign in with Farcaster to participate"})]}):(0,s.jsxs)(i.P.div,{className:"glass-card p-4 rounded-xl text-center border border-yellow-500/30",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-2xl mb-2",children:"\uD83D\uDD0C"}),(0,s.jsx)("p",{className:"text-yellow-300 text-sm font-medium",children:"Connecting to database..."})]})]}),e&&t&&S.length>0&&(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-2 pt-4 border-t border-gray-700/50",children:[(0,s.jsx)(N.J,{className:"text-gray-400 text-xs font-semibold uppercase tracking-wide",children:"✨ Your Prediction"}),(0,s.jsx)("div",{className:"space-y-2",children:S.map(e=>(0,s.jsx)(i.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"glass-card p-3 rounded-lg border-2 border-orange-500/40 bg-gradient-to-r from-orange-500/10 to-purple-500/10",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-orange-200 font-bold text-base",children:[e.guess.toLocaleString()," transactions"]}),(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:new Date(e.submittedAt).toLocaleTimeString()})]})]}),(0,s.jsx)("span",{className:"px-2 py-1 bg-orange-500/20 border border-orange-500/40 rounded text-orange-300 text-xs font-bold",children:"YOU"})]})},e.id))})]}),E&&0===S.length&&(0,s.jsxs)(i.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"glass-card p-4 rounded-xl text-center border-2 border-green-500/50 bg-green-500/10",children:[(0,s.jsx)("p",{className:"text-3xl mb-2",children:"✅"}),(0,s.jsx)("p",{className:"text-green-300 text-sm font-bold",children:"Guess Submitted!"}),(0,s.jsx)("p",{className:"text-green-400 text-xs mt-1",children:"One prediction per round"})]})]})]})}function S(e){let{}=e,{activeRound:t,getGuessesForRound:a}=(0,p.Im)(),r=t?a(t.id):[],l=[...r].sort((e,a)=>{if(t&&void 0!==t.actualTxCount){let s=Math.abs(e.guess-t.actualTxCount),r=Math.abs(a.guess-t.actualTxCount);return s!==r?s-r:e.submittedAt-a.submittedAt}return a.submittedAt-e.submittedAt}).slice(0,3),o=!!t&&"finished"===t.status&&void 0!==t.actualTxCount;return(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-purple-500/30 h-full shadow-3d",children:[(0,s.jsx)(b.aR,{children:(0,s.jsxs)(b.ZB,{className:"flex items-center gap-2 text-white text-2xl",children:[(0,s.jsx)(i.P.span,{animate:{rotate:[0,15,-15,0]},transition:{duration:2,repeat:1/0},children:"\uD83C\uDFC6"}),"Leaderboard"]})}),(0,s.jsx)(b.Wu,{children:t?0===r.length?(0,s.jsxs)(i.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-4xl mb-4",children:"\uD83C\uDFAF"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"No entries yet"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Leaderboard will appear after predictions"})]}):(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsx)(n.N,{mode:"popLayout",children:l.map((e,a)=>{var r;let n=o&&0===a,l=o&&a<3,c=t&&void 0!==t.actualTxCount?Math.abs(e.guess-t.actualTxCount):null;return(0,s.jsxs)(i.P.div,{initial:{opacity:0,x:-50,scale:.8},animate:{opacity:1,x:0,scale:1,...n&&{boxShadow:["0 0 0px rgba(234, 179, 8, 0)","0 0 30px rgba(234, 179, 8, 0.6)","0 0 0px rgba(234, 179, 8, 0)"]}},exit:{opacity:0,x:50,scale:.8},transition:{duration:.3,delay:.05*a,...n&&{boxShadow:{duration:2,repeat:1/0}}},whileHover:{scale:1.02,y:-2},className:"relative flex items-center justify-between p-4 rounded-xl border backdrop-blur-xl shadow-3d-sm hover:shadow-3d-md transition-all ".concat(n?"glass-card border-2 border-yellow-500/70 bg-gradient-to-r from-yellow-500/30 to-orange-500/30":l?"glass-card border-purple-400/50 bg-gradient-to-r from-purple-500/20 to-pink-500/20":"glass-card-dark border-gray-500/30"," overflow-hidden"),children:[n&&(0,s.jsx)(i.P.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-yellow-400/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0}}),(0,s.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,s.jsx)(i.P.div,{className:"flex items-center justify-center w-10 h-10 rounded-full font-black text-lg ".concat(n?"bg-gradient-to-br from-yellow-400 to-orange-500 text-white shadow-lg shadow-yellow-500/50":1===a?"bg-gradient-to-br from-gray-300 to-gray-400 text-gray-800":2===a?"bg-gradient-to-br from-amber-600 to-amber-700 text-white":"bg-gray-700/50 text-gray-400"),animate:n?{rotate:[0,10,-10,0]}:{},transition:{duration:.5,repeat:n?1/0:0},children:0===a&&o?"\uD83D\uDC51":"#".concat(a+1)}),(0,s.jsxs)(x,{className:"h-12 w-12 ring-2 ".concat(n?"ring-yellow-400 ring-offset-2 ring-offset-black":"ring-gray-500/50"),children:[(0,s.jsx)(m,{src:e.pfpUrl,alt:e.username}),(0,s.jsx)(u,{className:"".concat(n?"bg-gradient-to-br from-yellow-400 to-orange-500":"bg-gradient-to-br from-purple-500 to-pink-500"," text-white font-bold"),children:null==(r=e.username[0])?void 0:r.toUpperCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-bold ".concat(n?"text-yellow-300 text-lg":"text-white"),children:["@",e.username]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:new Date(e.submittedAt).toLocaleTimeString()})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 relative z-10",children:[(0,s.jsxs)(f.E,{variant:n?"default":"secondary",className:"".concat(n?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-black border-none shadow-lg":"bg-gray-700/50 text-gray-200 border-gray-600/50"," px-3 py-1"),children:[e.guess.toLocaleString()," txs"]}),null!==c&&(0,s.jsx)(f.E,{variant:"outline",className:"text-xs px-2 py-1 ".concat(n?"bg-yellow-500/20 text-yellow-300 border-yellow-400/50 font-bold":"bg-gray-700/30 text-gray-400 border-gray-600/30"),children:n?"\uD83C\uDFC6 WINNER!":"\xb1".concat(c.toLocaleString())})]})]},e.id)})})}):(0,s.jsxs)(i.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-4xl mb-4",children:"⏳"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"Waiting for round..."}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Leaderboard will appear when round starts"})]})})]})}function P(e){let{}=e,{activeRound:t,getGuessesForRound:a}=(0,p.Im)(),r=t?a(t.id):[],l=[...r].sort((e,t)=>t.submittedAt-e.submittedAt);return(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-purple-500/30 h-full shadow-3d",children:[(0,s.jsx)(b.aR,{children:(0,s.jsxs)(b.ZB,{className:"flex flex-col gap-2 text-white text-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.P.span,{animate:{rotate:[0,15,-15,0]},transition:{duration:2,repeat:1/0},children:"\uD83C\uDF10"}),"All Predictions (",r.length,")"]}),(0,s.jsx)("div",{className:"flex items-center gap-2 text-xs font-normal",children:(0,s.jsxs)(f.E,{variant:"outline",className:"bg-green-500/20 text-green-300 border-green-400/50",children:[(0,s.jsx)("span",{className:"inline-block w-1.5 h-1.5 bg-green-400 rounded-full mr-1.5 animate-pulse"}),"Live Updates"]})})]})}),(0,s.jsx)(b.Wu,{children:t?0===r.length?(0,s.jsxs)(i.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-4xl mb-4",children:"\uD83C\uDFB2"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"No predictions yet"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Be the first to guess!"})]}):(0,s.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-purple-600 scrollbar-track-gray-800",children:(0,s.jsx)(n.N,{mode:"popLayout",children:l.map((e,t)=>{var a;return(0,s.jsxs)(i.P.div,{initial:{opacity:0,x:-50,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.8},transition:{duration:.3,delay:.05*t},whileHover:{scale:1.02,y:-2},className:"relative flex items-center justify-between p-4 rounded-xl border backdrop-blur-xl glass-card-dark border-gray-500/30 overflow-hidden shadow-3d-sm hover:shadow-3d-md transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,s.jsxs)(x,{className:"h-12 w-12 ring-2 ring-gray-500/50",children:[(0,s.jsx)(m,{src:e.pfpUrl,alt:e.username}),(0,s.jsx)(u,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white font-bold",children:null==(a=e.username[0])?void 0:a.toUpperCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-white flex items-center gap-2",children:e.username}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["@",e.username," • ",new Date(e.submittedAt).toLocaleTimeString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 relative z-10",children:[(0,s.jsxs)(f.E,{variant:"secondary",className:"bg-purple-700/50 text-purple-200 border-purple-600/50 px-3 py-1 font-bold",children:[e.guess.toLocaleString()," tx"]}),(0,s.jsx)(i.P.span,{className:"text-2xl",animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,delay:.1*t},children:"\uD83C\uDFB2"})]})]},e.id)})})}):(0,s.jsxs)(i.P.div,{className:"text-center py-16",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-4xl mb-4",children:"⏳"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-medium",children:"Waiting for round..."}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"Predictions will appear when round starts"})]})})]})}function E(e){let{}=e,[t,a]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=setInterval(()=>{a(t=>t>=100?(clearInterval(e),100):t+2)},30);return()=>clearInterval(e)},[]),(0,s.jsxs)(i.P.div,{initial:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-orange-900",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-900/10 to-transparent",style:{backgroundImage:"\n                 linear-gradient(rgba(255, 120, 0, 0.1) 1px, transparent 1px),\n                 linear-gradient(90deg, rgba(255, 120, 0, 0.1) 1px, transparent 1px)\n               ",backgroundSize:"50px 50px"}}),[...Array(20)].map((e,t)=>(0,s.jsx)(i.P.div,{className:"absolute w-1 h-1 bg-orange-400 rounded-full",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,opacity:0},animate:{y:[null,Math.random()*window.innerHeight],opacity:[0,1,0]},transition:{duration:3*Math.random()+2,repeat:1/0,delay:2*Math.random()}},t))]}),(0,s.jsxs)("div",{className:"relative z-10 text-center space-y-8",children:[(0,s.jsx)(i.P.div,{animate:{rotate:360,scale:[1,1.1,1]},transition:{rotate:{duration:3,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0}},className:"mx-auto w-24 h-24 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-6xl",children:"\uD83D\uDEE0️"})}),(0,s.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,s.jsx)("h1",{className:"text-5xl font-bold text-white mb-2",children:"Bitcoin Blocks"}),(0,s.jsx)("p",{className:"text-orange-300 text-lg",children:"Predicting Bitcoin's Future"})]}),(0,s.jsxs)("div",{className:"w-80 mx-auto",children:[(0,s.jsx)("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden backdrop-blur-sm",children:(0,s.jsx)(i.P.div,{className:"h-full bg-gradient-to-r from-orange-500 via-purple-500 to-orange-500",initial:{width:0},animate:{width:"".concat(t,"%")},transition:{duration:.3}})}),(0,s.jsxs)(i.P.p,{className:"text-white text-sm mt-2",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[t<30&&"Connecting to blockchain...",t>=30&&t<60&&"Loading real-time data...",t>=60&&t<90&&"Initializing game state...",t>=90&&"Ready to predict!"]})]}),(0,s.jsx)("div",{className:"flex justify-center gap-2",children:[0,1,2,3].map(e=>(0,s.jsx)(i.P.div,{className:"w-3 h-3 bg-orange-500 rounded",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:.2*e}},e))})]})]})}function M(e){let{}=e,t=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=t.current;if(!e)return;let a=e.getContext("2d");if(!a)return;e.width=window.innerWidth,e.height=window.innerHeight;class s{update(){this.x+=this.speedX,this.y+=this.speedY;let t=(null==e?void 0:e.width)||800,a=(null==e?void 0:e.height)||600;this.x>t&&(this.x=0),this.x<0&&(this.x=t),this.y>a&&(this.y=0),this.y<0&&(this.y=a)}draw(){a&&(a.fillStyle="rgba(255, 120, 0, ".concat(this.opacity,")"),a.beginPath(),a.arc(this.x,this.y,this.size,0,2*Math.PI),a.fill())}constructor(){this.x=Math.random()*((null==e?void 0:e.width)||800),this.y=Math.random()*((null==e?void 0:e.height)||600),this.size=2*Math.random()+.5,this.speedX=.5*Math.random()-.25,this.speedY=.5*Math.random()-.25,this.opacity=.5*Math.random()+.2}}class r{update(){this.angle+=this.speed,this.x+=.5*Math.cos(this.angle),this.y+=.5*Math.sin(this.angle);let t=(null==e?void 0:e.width)||800,a=(null==e?void 0:e.height)||600;this.x>t+50&&(this.x=-50),this.x<-50&&(this.x=t+50),this.y>a+50&&(this.y=-50),this.y<-50&&(this.y=a+50)}draw(){a&&(a.strokeStyle="rgba(147, 51, 234, ".concat(this.opacity,")"),a.lineWidth=2,a.beginPath(),a.arc(this.x,this.y,this.size,0,2*Math.PI),a.stroke(),a.fillStyle="rgba(147, 51, 234, ".concat(.5*this.opacity,")"),a.font="".concat(.6*this.size,"px Arial"),a.textAlign="center",a.textBaseline="middle",a.fillText("⛓",this.x,this.y))}constructor(){this.x=Math.random()*((null==e?void 0:e.width)||800),this.y=Math.random()*((null==e?void 0:e.height)||600),this.size=30*Math.random()+20,this.angle=Math.random()*Math.PI*2,this.speed=.002*Math.random()+.001,this.opacity=.1*Math.random()+.05}}let n=[],i=[];for(let e=0;e<100;e++)n.push(new s);for(let e=0;e<8;e++)i.push(new r);!function t(){a&&e&&(a.clearRect(0,0,e.width,e.height),n.forEach((e,t)=>{n.slice(t+1).forEach(t=>{let s=e.x-t.x,r=e.y-t.y,n=Math.sqrt(s*s+r*r);n<100&&(a.strokeStyle="rgba(255, 120, 0, ".concat(.1*(1-n/100),")"),a.lineWidth=.5,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke())})}),i.forEach(e=>{e.update(),e.draw()}),n.forEach(e=>{e.update(),e.draw()}),requestAnimationFrame(t))}();let l=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[]),(0,s.jsx)("canvas",{ref:t,className:"fixed inset-0 pointer-events-none opacity-30",style:{zIndex:0}})}function A(e){let{}=e,[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=async()=>{try{l(!0),c(null);let e=await fetch("/api/mempool?action=recent-blocks");if(!e.ok)throw Error("Failed to fetch blocks");let t=await e.json();a(t.slice(0,5))}catch(e){console.error("Failed to fetch recent blocks:",e),c(e instanceof Error?e.message:"Unknown error")}finally{l(!1)}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]);let d=e=>"".concat(e.substring(0,10),"...").concat(e.substring(e.length-10)),x=e=>{let t=new Date(1e3*e),a=Math.floor((new Date().getTime()-t.getTime())/1e3/60);return a<60?"".concat(a,"m ago"):a<1440?"".concat(Math.floor(a/60),"h ago"):"".concat(Math.floor(a/1440),"d ago")};return(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-orange-500/50 shadow-3d",children:[(0,s.jsx)(b.aR,{className:"pb-3 border-b border-orange-500/20",children:(0,s.jsxs)(b.ZB,{className:"flex items-center gap-3 text-white text-xl",children:[(0,s.jsx)(i.P.span,{animate:{scale:[1,1.3,1],rotate:[0,10,-10,0]},transition:{duration:3,repeat:1/0},className:"text-3xl",children:"\uD83D\uDCE6"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-lg font-black gradient-text",children:"Recent Bitcoin Blocks"}),(0,s.jsx)("div",{className:"text-[10px] text-orange-300 font-normal",children:"Live blockchain data from mempool.space"})]}),(0,s.jsx)(f.E,{variant:"outline",className:"bg-orange-500/20 text-orange-300 border-orange-400/50 text-xs px-3 py-1",children:"Last 5 Blocks"})]})}),(0,s.jsx)(b.Wu,{className:"pt-4",children:n?(0,s.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-orange-600 scrollbar-track-gray-800",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(i.P.div,{className:"glass-card p-4 rounded-xl min-w-[280px]",animate:{opacity:[.3,.6,.3]},transition:{duration:1.5,repeat:1/0,delay:.1*t},children:[(0,s.jsx)("div",{className:"h-4 bg-gray-600/50 rounded w-3/4 mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-700/50 rounded w-1/2"})]},t))}):o?(0,s.jsxs)(i.P.div,{className:"glass-card p-8 rounded-2xl text-center space-y-3",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},children:[(0,s.jsx)("p",{className:"text-5xl",children:"⚠️"}),(0,s.jsx)("p",{className:"text-red-300 text-base font-bold",children:"Failed to Load Blocks"}),(0,s.jsx)("p",{className:"text-gray-400 text-xs",children:o})]}):0===t.length?(0,s.jsxs)(i.P.div,{className:"glass-card p-8 rounded-2xl text-center space-y-3",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-5xl",children:"\uD83D\uDCED"}),(0,s.jsx)("p",{className:"text-gray-300 text-base font-medium",children:"No blocks available"})]}):(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-orange-600 scrollbar-track-gray-800",children:t.map((e,t)=>(0,s.jsxs)(i.P.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.05*t},className:"glass-card p-4 rounded-xl hover:border-orange-500/50 border border-transparent transition-all duration-300 group relative overflow-hidden min-w-[280px] flex-shrink-0",children:[(0,s.jsx)(i.P.div,{className:"absolute inset-0 bg-gradient-to-r from-orange-500/0 via-orange-500/10 to-orange-500/0 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0}}),(0,s.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(f.E,{className:"bg-orange-500/20 text-orange-300 border-orange-400/50 text-xs px-2 py-0.5 font-mono",children:["#",e.height]}),(0,s.jsx)("span",{className:"text-[10px] text-gray-500",children:x(e.timestamp)})]}),0===t&&(0,s.jsx)(i.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:(0,s.jsx)(f.E,{className:"bg-green-500/20 text-green-300 border-green-400/50 text-[10px] px-2 py-0.5",children:"Latest"})})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-orange-500/10 to-purple-500/10 rounded-lg p-3 border border-orange-500/30",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-400 text-xs font-semibold",children:"Total Transactions"}),(0,s.jsx)(i.P.span,{className:"text-2xl font-black gradient-text",animate:{textShadow:["0 0 10px rgba(255,120,0,0.5)","0 0 20px rgba(255,120,0,0.8)","0 0 10px rgba(255,120,0,0.5)"]},transition:{duration:2,repeat:1/0},children:e.tx_count.toLocaleString()})]})}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Block Hash:"}),(0,s.jsx)("span",{className:"text-cyan-300 font-mono",children:d(e.hash)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-[10px]",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Size:"}),(0,s.jsxs)("span",{className:"text-purple-300 font-semibold",children:[(e.size/1024/1024).toFixed(2)," MB"]})]})]})]})]},e.height))}),!n&&!o&&t.length>0&&(0,s.jsx)(i.P.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"text-center pt-3 border-t border-orange-500/20",children:(0,s.jsxs)("p",{className:"text-xs text-gray-400 flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),"Auto-refreshing every 60 seconds"]})})]})})]})}function T(){let{connected:e,mode:t}=(0,p.Im)();return(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 glass-card border-b border-white/10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(f.E,{variant:"outline",className:"bg-purple-500/20 text-purple-300 border-purple-400/50 px-3 py-1.5 text-xs font-bold",children:"\uD83D\uDD34 REAL-TIME MODE"}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:(0,s.jsx)("span",{children:"Connected to live Bitcoin network"})})]}),(0,s.jsxs)(f.E,{variant:"outline",className:"".concat(e?"bg-green-500/20 text-green-300 border-green-400/50":"bg-red-500/20 text-red-300 border-red-400/50"," px-3 py-1.5 text-xs font-semibold"),children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat(e?"bg-green-400 animate-pulse":"bg-red-400")}),e?"Connected":"Disconnected"]})]})})}function F(e){let{}=e,{activeRound:t,connected:a,errorStates:n,loadingStates:l}=(0,p.Im)(),[o,c]=(0,r.useState)("0m 0s"),[d,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[y,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),w=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{let e=new AbortController,t=setTimeout(()=>e.abort(),5e3),a=await fetch("/api/mempool?action=recent-blocks",{signal:e.signal,headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(clearTimeout(t),!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let s=await a.json();s.timestamp&&x(1e3*s.timestamp),s.height&&u(s.height),s.tx_count&&g(s.tx_count),v(null),console.log("✅ Block data fetched successfully")}catch(t){if(console.error("❌ Failed to fetch block data (attempt ".concat(e+1,"):"),t),e<3){let t=1e3*Math.pow(2,e);console.log("\uD83D\uDD04 Retrying in ".concat(t,"ms...")),setTimeout(()=>w(e+1),t)}else v("Failed to fetch block data. Please check your connection.")}},[]);(0,r.useEffect)(()=>{w();let e=setInterval(w,6e4);return()=>clearInterval(e)},[w]),(0,r.useEffect)(()=>{let e;if(!t||!t.duration)return;let a=Date.now(),s=()=>{let r=Date.now(),n=t.endTime-r;if(n<=0)return void c("0m 0s");if(r-a>=1e3){let e=Math.floor(n/1e3),t=Math.floor(e/60);c("".concat(t,"m ").concat(e%60,"s")),a=r}e=requestAnimationFrame(s)};return s(),()=>{e&&cancelAnimationFrame(e)}},[t]);let D=()=>t?t.status.toUpperCase():"WAITING",k=()=>t?"open"===t.status?"bg-green-500/20 text-green-300 border-green-400/50":"closed"===t.status?"bg-yellow-500/20 text-yellow-300 border-yellow-400/50":"finished"===t.status?"bg-purple-500/20 text-purple-300 border-purple-400/50":"bg-gray-500/20 text-gray-300 border-gray-400/50":"bg-gray-500/20 text-gray-300 border-gray-400/50",C=(0,r.useMemo)(()=>D(),[t]),S=(0,r.useMemo)(()=>k(),[t]),P=(0,r.useMemo)(()=>{var e;return(null==t||null==(e=t.roundNumber)?void 0:e.toString())||"—"},[null==t?void 0:t.roundNumber]),E=(0,r.useMemo)(()=>(null==t?void 0:t.blockNumber)||m||875420,[null==t?void 0:t.blockNumber,m]),M=(0,r.useMemo)(()=>h||0,[h]);return a?t&&"closed"!==t.status&&"finished"!==t.status?(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-orange-500/30 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-purple-500 to-orange-500 animate-pulse"}),(0,s.jsx)(b.Wu,{className:"py-6 px-6",children:(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i.P.span,{animate:{rotate:360*("open"===t.status)},transition:{duration:3,repeat:"open"===t.status?1/0:0,ease:"linear"},className:"text-2xl",children:"\uD83C\uDFAE"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-lg lg:text-xl font-black text-white",children:["Round #",P]}),(0,s.jsx)(f.E,{variant:"default",className:"".concat(S," px-3 py-0.5 text-xs font-bold"),children:C})]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Started by admin"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 w-full lg:w-auto",children:[(0,s.jsx)("div",{className:"glass-card p-3 lg:p-4 rounded-xl flex-1 relative",children:(0,s.jsxs)("div",{className:"text-center space-y-1",children:[(0,s.jsx)("p",{className:"text-[10px] lg:text-xs text-blue-300 font-semibold",children:"\uD83E\uDDF1 Target Block"}),(0,s.jsxs)(i.P.p,{className:"text-xl lg:text-2xl font-black text-blue-400 font-mono",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:["#",E.toLocaleString()]},E),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsxs)("p",{className:"text-[9px] lg:text-[10px] text-gray-400",children:["Txs: ",M.toLocaleString()]}),y&&(0,s.jsx)("button",{onClick:()=>{N(!0),w().finally(()=>N(!1))},className:"text-[9px] text-yellow-400 hover:text-yellow-300",disabled:j,children:"\uD83D\uDD04"})]}),y&&(0,s.jsx)("p",{className:"text-[8px] text-red-400 mt-1",children:y})]})}),(0,s.jsx)("div",{className:"glass-card p-3 lg:p-4 rounded-xl flex-1",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-[10px] lg:text-xs text-orange-300 font-semibold mb-1",children:"⏱ Time Left"}),(0,s.jsx)(i.P.p,{className:"text-xl lg:text-2xl font-black text-white font-mono",animate:{textShadow:"open"===t.status?["0 0 10px rgba(251,146,60,0.5)","0 0 20px rgba(251,146,60,0.8)","0 0 10px rgba(251,146,60,0.5)"]:[]},transition:{duration:2,repeat:"open"===t.status?1/0:0},children:o},o),(0,s.jsx)("p",{className:"text-[9px] lg:text-[10px] text-gray-400 mt-1",children:t.duration?"".concat(t.duration,"m"):"N/A"})]})})]})]})})]})}):(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:(0,s.jsx)(b.Zp,{className:"glass-card-dark border-gray-500/30 overflow-hidden",children:(0,s.jsx)(b.Wu,{className:"py-8 px-6",children:(0,s.jsxs)(i.P.div,{className:"text-center",animate:{opacity:[.5,1,.5]},transition:{duration:3,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-xl text-gray-400 mb-2",children:"⏳"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Waiting for admin to start round..."}),(0,s.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:t?"Round closed - waiting for next round":"No active round yet"})]})})})}):(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},children:(0,s.jsxs)(b.Zp,{className:"glass-card-dark border-orange-500/30 overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-500 via-purple-500 to-orange-500 animate-pulse"}),(0,s.jsx)(b.Wu,{className:"py-6 px-6",children:(0,s.jsxs)(i.P.div,{className:"text-center py-8",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"\uD83D\uDD0C Connecting to database..."}),n.connection&&(0,s.jsx)("p",{className:"text-red-400 text-xs mt-2",children:n.connection})]})})]})})}function I(e){let{firstPrize:t="1,000",secondPrize:a="500",currency:r="$SECOND"}=e;return(0,s.jsx)(i.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.35},className:"w-full",children:(0,s.jsx)(b.Zp,{className:"glass-card border border-orange-500/30 shadow-3d overflow-hidden",children:(0,s.jsxs)(b.Wu,{className:"p-3 sm:p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-yellow-300 flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-base",children:"\uD83C\uDFC6"}),"Prizes"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#111111]/50 border border-yellow-500/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83E\uDD47"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-yellow-400",children:"1st"})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-sm font-bold text-[#EAEAEA]",children:[t," ",(0,s.jsx)("span",{className:"text-green-400 text-xs",children:r})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg bg-[#111111]/50 border border-gray-500/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83E\uDD48"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-gray-300",children:"2nd"})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-sm font-bold text-[#EAEAEA]",children:[a," ",(0,s.jsx)("span",{className:"text-green-400 text-xs",children:r})]})})]})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-700/50"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("h3",{className:"text-sm font-bold text-orange-300 flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"text-base",children:"\uD83D\uDCDC"}),"Rules"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,s.jsx)("div",{className:"text-lg mb-0.5",children:"\uD83E\uDDE0"}),(0,s.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"Guess tx count"})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,s.jsx)("div",{className:"text-lg mb-0.5",children:"\uD83E\uDD47"}),(0,s.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"Closest wins"})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,s.jsx)("div",{className:"text-lg mb-0.5",children:"\uD83D\uDD22"}),(0,s.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"One guess/player"})]}),(0,s.jsxs)("div",{className:"text-center p-2 rounded-lg glass-card-dark border border-purple-500/20",children:[(0,s.jsx)("div",{className:"text-lg mb-0.5",children:"⏱"}),(0,s.jsx)("p",{className:"text-[10px] font-semibold text-orange-200",children:"Earliest wins ties"})]})]})]}),(0,s.jsx)("div",{className:"text-center pt-1",children:(0,s.jsx)("div",{className:"inline-block px-3 py-1 rounded-full glass-card-dark border border-blue-500/30",children:(0,s.jsxs)("p",{className:"text-[10px] text-blue-300",children:["\uD83D\uDCE1 Data: ",(0,s.jsx)("span",{className:"font-bold text-blue-200",children:"mempool.space"})]})})})]})})})}var R=a(85);function B(){let{trackInteraction:e}=(0,R.LC)("PerformanceDashboard"),{connected:t,performance:a}=(0,p.Im)(),[n,i]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)(Date.now()),h=async()=>{try{e("fetchPerformanceData");let f=await fetch("/api/analytics?action=performance&period=1h",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("auth_token")||"")}});if(f.ok){var s,r,n,l,o,d,x,m,p,h,g,b;let e=await f.json(),y=[];(null==(n=e.performance)||null==(r=n.clientMetrics)||null==(s=r.pageLoadTime)?void 0:s.avg)&&y.push({name:"Page Load Time",value:Math.round(e.performance.clientMetrics.pageLoadTime.avg),unit:"ms",timestamp:Date.now(),status:e.performance.clientMetrics.pageLoadTime.avg>3e3?"critical":e.performance.clientMetrics.pageLoadTime.avg>1500?"warning":"good"}),(null==(d=e.performance)||null==(o=d.clientMetrics)||null==(l=o.apiCallTime)?void 0:l.avg)&&y.push({name:"API Response Time",value:Math.round(e.performance.clientMetrics.apiCallTime.avg),unit:"ms",timestamp:Date.now(),status:e.performance.clientMetrics.apiCallTime.avg>1e3?"critical":e.performance.clientMetrics.apiCallTime.avg>500?"warning":"good"}),(null==(p=e.performance)||null==(m=p.clientMetrics)||null==(x=m.memoryUsage)?void 0:x.avg)&&y.push({name:"Memory Usage",value:Math.round(e.performance.clientMetrics.memoryUsage.avg),unit:"MB",timestamp:Date.now(),status:e.performance.clientMetrics.memoryUsage.avg>100?"critical":e.performance.clientMetrics.memoryUsage.avg>50?"warning":"good"}),y.push({name:"Connection Health",value:100*!!t,unit:"%",timestamp:Date.now(),status:t?"good":"critical"}),y.push({name:"Sync Operations",value:a.syncCount,unit:"count",timestamp:Date.now(),status:a.errorCount>5?"warning":"good"}),i(y);let v=[];(null==(b=e.performance)||null==(g=b.clientMetrics)||null==(h=g.summary)?void 0:h.alerts)&&e.performance.clientMetrics.summary.alerts.forEach((e,t)=>{v.push({id:"alert-".concat(Date.now(),"-").concat(t),type:e.value>3e3?"error":"warning",message:"".concat(e.name,": ").concat(e.value).concat(e.unit),timestamp:Date.now(),metric:e.name})}),a.errorCount>0&&v.push({id:"error-count-".concat(Date.now()),type:"warning",message:"".concat(a.errorCount," errors recorded in current session"),timestamp:Date.now()}),t||v.push({id:"connection-".concat(Date.now()),type:"error",message:"Database connection lost",timestamp:Date.now()}),c(v.slice(0,5)),u(Date.now())}}catch(t){console.error("Failed to fetch performance data:",t),e("fetchPerformanceDataError",{error:t.message})}};(0,r.useEffect)(()=>{h();let e=setInterval(h,3e4);return()=>clearInterval(e)},[t,a.syncCount,a.errorCount]);let g=e=>{switch(e){case"good":return"bg-green-500";case"warning":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},y=e=>{switch(e){case"error":return"❌";case"warning":return"⚠️";case"info":return"ℹ️";default:return"\uD83D\uDCCA"}};return d?(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-50 w-96 max-h-96 overflow-hidden",children:(0,s.jsxs)(b.Zp,{className:"shadow-xl border-2",children:[(0,s.jsxs)(b.aR,{className:"pb-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(b.ZB,{className:"text-sm font-medium",children:"Performance Monitor"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.$,{onClick:h,size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:"\uD83D\uDD04"}),(0,s.jsx)(o.$,{onClick:()=>{x(!1),e("closePerformanceDashboard")},size:"sm",variant:"outline",className:"h-6 px-2 text-xs",children:"✕"})]})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(m).toLocaleTimeString()]})]}),(0,s.jsxs)(b.Wu,{className:"space-y-3 max-h-80 overflow-y-auto",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:n.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs font-medium truncate",children:e.name}),(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(g(e.status))})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[e.value,(0,s.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:e.unit})]})]},t))}),l.length>0&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-red-600",children:"Alerts"}),l.map(e=>(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 p-2 rounded",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{children:y(e.type)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-xs text-red-800",children:e.message}),(0,s.jsx)("p",{className:"text-xs text-red-600 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]})]})},e.id))]}),(0,s.jsx)("div",{className:"bg-gray-50 p-2 rounded",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs font-medium",children:"Database Connection"}),(0,s.jsx)(f.E,{variant:t?"default":"destructive",className:"text-xs",children:t?"Connected":"Disconnected"})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,s.jsx)("div",{className:"text-xs font-medium mb-1",children:"Session Stats"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,s.jsxs)("div",{children:["Syncs: ",a.syncCount]}),(0,s.jsxs)("div",{children:["Errors: ",a.errorCount]}),(0,s.jsxs)("div",{children:["Health: ",a.getConnectionHealth()?"Good":"Poor"]}),(0,s.jsxs)("div",{children:["Last Sync: ",new Date(a.lastSyncTime).toLocaleTimeString()]})]})]})]})]})}):(0,s.jsxs)("div",{className:"fixed bottom-4 right-4 z-50",children:[(0,s.jsx)(o.$,{onClick:()=>{x(!0),e("openPerformanceDashboard")},className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg",size:"sm",children:"\uD83D\uDCCA"}),l.length>0&&(0,s.jsx)(f.E,{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full px-1 py-0 text-xs",children:l.length})]})}var z=a(92966);function L(){(0,l.useRouter)();let[e,t]=(0,r.useState)(!0),[a,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,y]=(0,r.useState)(null),{activeRound:v,getGuessesForRound:N,connected:w,user:D,prizeConfig:R,loadingStates:L,errorStates:W,performance:O,retryActions:Z}=(0,p.Im)();(0,r.useMemo)(()=>v?N(v.id).length:0,[v,N]);let U=(0,r.useCallback)(async()=>{let e=0;for(;e<3;)try{console.log("\uD83D\uDD04 Initializing Farcaster SDK (attempt ".concat(e+1,"/").concat(3,")")),"complete"!==document.readyState&&await new Promise(e=>{"complete"===document.readyState?e():window.addEventListener("load",()=>e(),{once:!0})}),await new Promise(e=>setTimeout(e,100)),await z.sdk.actions.ready(),console.log("✅ Farcaster SDK initialized successfully"),u(!0),y(null);return}catch(a){let t=++e>=3;if(console.error("❌ Farcaster SDK initialization attempt ".concat(e," failed:"),a),t)y("Failed to initialize Farcaster SDK. Some features may not work properly."),console.error("All Farcaster SDK initialization attempts failed");else{let t=1e3*Math.pow(2,e-1);await new Promise(e=>setTimeout(e,t))}}},[]);return(0,r.useEffect)(()=>{(async()=>{try{await U();let e=Date.now(),a=setTimeout(()=>{let a=Date.now()-e,s=Math.max(0,2e3-a);setTimeout(()=>{t(!1),D||h||c(!0)},s)},500);return()=>clearTimeout(a)}catch(e){console.error("App initialization failed:",e),y("App initialization failed"),t(!1)}})()},[U,D,h]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.N,{mode:"wait",children:e&&(0,s.jsx)(E,{},"loading")}),!e&&(0,s.jsxs)(i.P.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen relative overflow-hidden",style:{background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #533483 75%, #e94560 100%)"},children:[(0,s.jsx)(M,{}),(0,s.jsx)(T,{}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-black/10 to-black/30 pointer-events-none"}),(0,s.jsxs)("div",{className:"relative z-10 max-w-7xl mx-auto p-3 sm:p-4 pt-16 sm:pt-20 pb-16 sm:pb-20 space-y-4 sm:space-y-6",children:[(0,s.jsxs)(i.P.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(i.P.h1,{className:"text-3xl lg:text-4xl font-black gradient-text flex items-center gap-3 relative z-50",style:{filter:"none",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",transform:"translateZ(0)"},children:[(0,s.jsx)("span",{className:"text-4xl lg:text-5xl",style:{display:"inline-block",lineHeight:"1",filter:"contrast(1.2) brightness(1.1)",transform:"translateZ(0)",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},children:"\uD83D\uDEE0️"}),"Bitcoin Blocks"]}),(0,s.jsxs)("p",{className:"text-orange-300 text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),"Predicting Bitcoin's Next Block"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i.P.div,{animate:{scale:w?[1,1.05,1]:1},transition:{duration:2,repeat:1/0},children:(0,s.jsxs)(f.E,{variant:"outline",className:"".concat(w?"glass-card text-green-300 border-green-400/50 shadow-lg shadow-green-500/20":"glass-card-dark text-red-300 border-red-400/50"," px-3 py-1.5 text-xs font-semibold"),children:[(0,s.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 ".concat(w?"bg-green-400 animate-pulse":"bg-red-400")}),w?"Connected":"Disconnected"]})}),(0,s.jsx)(g,{})]})]}),(0,s.jsx)(i.P.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:(0,s.jsxs)(b.Zp,{className:"glass-card border-2 border-yellow-500/50 overflow-hidden relative shadow-3d",children:[(0,s.jsx)(i.P.div,{className:"absolute inset-0 bg-gradient-to-r from-yellow-500/0 via-yellow-500/20 to-yellow-500/0",animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0}}),(0,s.jsxs)(b.Wu,{className:"py-4 sm:py-6 text-center relative z-10",children:[(0,s.jsx)("p",{className:"text-yellow-300 text-xs sm:text-sm font-bold uppercase tracking-wider mb-1",children:"\uD83D\uDCB0 Jackpot"}),(0,s.jsx)(i.P.p,{className:"text-3xl sm:text-5xl font-black gradient-text",animate:{textShadow:["0 0 20px rgba(234,179,8,0.5)","0 0 40px rgba(234,179,8,0.8)","0 0 20px rgba(234,179,8,0.5)"]},transition:{duration:2,repeat:1/0},children:R?"".concat(Number(R.jackpotAmount).toLocaleString()," ").concat(R.currencyType):"5,000 $SECOND"})]})]})}),(0,s.jsx)(I,{firstPrize:R?Number(R.firstPlaceAmount).toLocaleString():"1,000",secondPrize:R?Number(R.secondPlaceAmount).toLocaleString():"500",currency:(null==R?void 0:R.currencyType)||"$SECOND"}),(0,s.jsx)(F,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,s.jsx)(i.P.div,{initial:{x:-30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.5},children:(0,s.jsx)(C,{})}),(0,s.jsx)(i.P.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.6},children:(0,s.jsx)(S,{})}),(0,s.jsx)(i.P.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},transition:{delay:.7},children:(0,s.jsx)(j,{})})]}),(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.75},children:(0,s.jsx)(P,{})}),(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},children:(0,s.jsx)(A,{})}),D&&(0,p.gD)(D.address)&&(0,s.jsx)(i.P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.85},className:"flex justify-center",children:(0,s.jsx)(o.$,{onClick:()=>x(!d),className:"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-600 hover:to-orange-700 text-white font-bold px-6 py-3 transition-all",children:d?"❌ Hide Admin Panel":"\uD83D\uDEE0️ Show Admin Panel"})}),d&&(0,s.jsx)(k,{})]})]}),(0,s.jsx)(B,{})]})}r.Component}},e=>{var t=t=>e(e.s=t);e.O(0,[127,295,628,160,137,586,788,145,358],()=>t(62332)),_N_E=e.O()}]);